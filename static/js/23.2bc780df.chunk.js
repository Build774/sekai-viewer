(this["webpackJsonpsekai-viewer"]=this["webpackJsonpsekai-viewer"]||[]).push([[23],{5957:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return m})),a.d(t,"c",(function(){return d}));var n=a(32),r=a(42),c=a(6092),i=a(0),o=a.n(i),s=a(5955),l=a(50),u=function(e){var t=e.mode,a=e.contentKey,n=e.original,i=e.originalProps,s=e.translatedProps,u=e.assetTOptions,m=Object(l.b)().assetT;switch(t){case"original":return o.a.createElement(r.a,i,n);case"translated":return o.a.createElement(r.a,s,m(a,n,u));case"both":return o.a.createElement(c.a,{container:!0,direction:"column"},o.a.createElement(r.a,Object.assign({},i,{color:"textPrimary"}),n),o.a.createElement(r.a,Object.assign({},s,{color:"textSecondary"}),m(a,n,u)))}},m=function(e){var t=e.mode,a=e.characterId,u=e.originalProps,m=e.translatedProps,d=e.assetTOptions,b=Object(s.b)("gameCharacters"),f=Object(n.a)(b,1)[0],p=Object(l.b)(),h=p.assetT,g=p.assetI18n,v=Object(i.useState)(),O=Object(n.a)(v,2),j=O[0],E=O[1];if(Object(i.useEffect)((function(){f.length&&E(f.find((function(e){return e.id===a})))}),[f,a]),!j)return o.a.createElement(r.a,null);switch(t){case"original":return o.a.createElement(r.a,u,j.firstName," ",j.givenName);case"translated":return["zh-CN","zh-TW","ko","ja"].includes(g.language)?o.a.createElement(r.a,m,j.firstName?h("character_name:".concat(a,".firstName"),j.firstName,d):""," ",h("character_name:".concat(a,".givenName"),j.givenName,d)):o.a.createElement(r.a,null,h("character_name:".concat(a,".givenName"),j.givenName,d)," ",j.firstName?h("character_name:".concat(a,".firstName"),j.firstName,d):"");case"both":return o.a.createElement(c.a,{container:!0,direction:"column"},o.a.createElement(r.a,u,j.firstName," ",j.givenName),["zh-CN","zh-TW","ko","ja"].includes(g.language)?o.a.createElement(r.a,Object.assign({color:"textSecondary"},m),j.firstName?h("character_name:".concat(a,".firstName"),j.firstName,d):""," ",h("character_name:".concat(a,".givenName"),j.givenName,d)):o.a.createElement(r.a,Object.assign({color:"textSecondary"},m),h("character_name:".concat(a,".givenName"),j.givenName,d)," ",j.firstName?h("character_name:".concat(a,".firstName"),j.firstName,d):""))}},d=function(e){var t=e.mode,a=e.releaseCondId,r=e.originalProps,c=e.translatedProps,l=e.assetTOptions,m=Object(s.b)("releaseConditions"),d=Object(n.a)(m,1)[0],b=Object(i.useState)(),f=Object(n.a)(b,2),p=f[0],h=f[1];if(Object(i.useEffect)((function(){d.length&&h(d.find((function(e){return e.id===a})))}),[a,d]),p){var g="";switch(p.releaseConditionType){case"none":g="release_cond:none_".concat(p.id);break;case"card_level":g="release_cond:card_level",l=Object.assign({},l,{level:p.releaseConditionTypeLevel});break;default:g="release_cond:".concat(p.releaseConditionType)}return o.a.createElement(u,{mode:t,contentKey:g,original:p.sentence,originalProps:r,translatedProps:c,assetTOptions:l})}return o.a.createElement("div",null)}},5962:function(e,t,a){"use strict";var n=a(32),r=a(65),c=a(18),i=a(5924),o=a(6092),s=a(0),l=a.n(s),u=["xs","sm","md","lg","xl"],m={xs:12,md:4};t.a=function(e){var t=e.viewComponent,a=e.callback,d=e.data,b=function(e){var t=Object(r.a)({},e||m);return u.forEach((function(e,a,n){t[e]||(t[e]=a>0?t[n[a-1]]:12)})),t}(e.gridSize),f=function(){var e=Object(c.a)();return u.map((function(t){return Object(i.a)(e.breakpoints.down(t))&&t})).find(Boolean)||u[u.length-1]}(),p=Object(s.useState)(!0),h=Object(n.a)(p,2),g=h[0],v=h[1],O=Object(s.useRef)(new IntersectionObserver((function(e){return a(e,v)}),{threshold:.5})),j=Object(s.useRef)(null);Object(s.useEffect)((function(){v(!0)}),[d]),Object(s.useEffect)((function(){var e=O.current,t=j.current;return t&&e.observe(t),function(){t&&e.unobserve(t)}}));var E=12/b[f],y=d.length?E:2*E;return l.a.createElement(s.Fragment,null,l.a.createElement(o.a,{container:!0,direction:"row",spacing:1},d.length?d.map((function(e,a){return l.a.createElement(o.a,{key:a,item:!0,xs:b.xs,sm:b.sm,md:b.md,lg:b.lg,xl:b.xl},t({data:e,index:a}))})):null),l.a.createElement(o.a,{container:!0,direction:"row",ref:j,style:{display:g?"flex":"none",paddingTop:"4px"},spacing:1},Array.from({length:y}).map((function(e,a){return l.a.createElement(o.a,{key:"empty-".concat(a),item:!0,xs:b.xs,sm:b.sm,md:b.md,lg:b.lg,xl:b.xl},t({}))}))))}},5963:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(34),r=a(5910),c=Object(r.a)((function(e){return{container:{margin:e.spacing(1,0),padding:e.spacing(1,2)},caption:Object(n.a)({},e.breakpoints.up("md"),{textAlign:"right"}),sliderContainer:Object(n.a)({},e.breakpoints.up("md"),{paddingRight:e.spacing(5)})}}))},6044:function(e,t,a){"use strict";var n=a(1),r=a(2),c=a(0),i=(a(4),a(3)),o=a(6),s=a(5),l=a(80),u=a(10),m=a(42),d=c.forwardRef((function(e,t){var a=e.classes,s=e.className,d=e.color,b=void 0===d?"primary":d,f=e.component,p=void 0===f?"a":f,h=e.onBlur,g=e.onFocus,v=e.TypographyClasses,O=e.underline,j=void 0===O?"hover":O,E=e.variant,y=void 0===E?"inherit":E,N=Object(r.a)(e,["classes","className","color","component","onBlur","onFocus","TypographyClasses","underline","variant"]),x=Object(l.a)(),k=x.isFocusVisible,w=x.onBlurVisible,z=x.ref,C=c.useState(!1),S=C[0],T=C[1],_=Object(u.a)(t,z);return c.createElement(m.a,Object(n.a)({className:Object(i.a)(a.root,a["underline".concat(Object(o.a)(j))],s,S&&a.focusVisible,"button"===p&&a.button),classes:v,color:b,component:p,onBlur:function(e){S&&(w(),T(!1)),h&&h(e)},onFocus:function(e){k(e)&&T(!0),g&&g(e)},ref:_,variant:y},N))}));t.a=Object(s.a)({root:{},underlineNone:{textDecoration:"none"},underlineHover:{textDecoration:"none","&:hover":{textDecoration:"underline"}},underlineAlways:{textDecoration:"underline"},button:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none","&::-moz-focus-inner":{borderStyle:"none"},"&$focusVisible":{outline:"auto"}},focusVisible:{}},{name:"MuiLink"})(d)},6047:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(54);function r(e,t){switch(t.type){case"add":return[].concat(Object(n.a)(e),[t.payload]);case"remove":return[].concat(Object(n.a)(e.slice(0,e.indexOf(t.payload))),Object(n.a)(e.slice(e.indexOf(t.payload)+1)));case"reset":return[];default:throw new Error}}},6069:function(e,t,a){"use strict";var n=a(1),r=a(2),c=a(0),i=(a(4),a(3)),o=a(5),s=a(53),l=Object(s.a)(c.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var u=c.forwardRef((function(e,t){var a=e.alt,o=e.children,s=e.classes,u=e.className,m=e.component,d=void 0===m?"div":m,b=e.imgProps,f=e.sizes,p=e.src,h=e.srcSet,g=e.variant,v=void 0===g?"circle":g,O=Object(r.a)(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),j=null,E=function(e){var t=e.src,a=e.srcSet,n=c.useState(!1),r=n[0],i=n[1];return c.useEffect((function(){if(t||a){i(!1);var e=!0,n=new Image;return n.src=t,n.srcSet=a,n.onload=function(){e&&i("loaded")},n.onerror=function(){e&&i("error")},function(){e=!1}}}),[t,a]),r}({src:p,srcSet:h}),y=p||h,N=y&&"error"!==E;return j=N?c.createElement("img",Object(n.a)({alt:a,src:p,srcSet:h,sizes:f,className:s.img},b)):null!=o?o:y&&a?a[0]:c.createElement(l,{className:s.fallback}),c.createElement(d,Object(n.a)({className:Object(i.a)(s.root,s.system,s[v],u,!N&&s.colorDefault),ref:t},O),j)}));t.a=Object(o.a)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circle:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}}}),{name:"MuiAvatar"})(u)},6205:function(e,t,a){"use strict";a.r(t);var n=a(54),r=a(32),c=a(5910),i=a(6033),o=a(6043),s=a(42),l=a(6044),u=a(6031),m=a(5938),d=a(6092),b=a(6093),f=a(5949),p=a(5929),h=a(112),g=a(6165),v=a(6069),O=a(0),j=a.n(O),E=a(7),y=Object(E.a)(j.a.createElement("path",{d:"M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z"}),"Update"),N=Object(E.a)(j.a.createElement("path",{d:"M5 4v2h14V4H5zm0 10h4v6h6v-6h4l-7-7-7 7z"}),"Publish"),x=Object(E.a)(j.a.createElement("path",{d:"M5 4h14v2H5zm0 10h4v6h6v-6h4l-7-7-7 7zm8-2v6h-2v-6H9.83L12 9.83 14.17 12H13z"}),"PublishOutlined"),k=Object(E.a)(j.a.createElement("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}),"GetApp"),w=Object(E.a)(j.a.createElement("path",{d:"M13 5v6h1.17L12 13.17 9.83 11H11V5h2m2-2H9v6H5l7 7 7-7h-4V3zm4 15H5v2h14v-2z"}),"GetAppOutlined"),z=a(6185),C=a(6186),S=a(6032),T=a(44),_=a(5883),P=a(51),H=a(6047),R=a(5963),I=a(5956),M=a(5955),V=a(5960),A=a(5957),B=a(5962),F=Object(c.a)((function(e){return{media:{paddingTop:"75%",backgroundSize:"contain"},card:{cursor:"pointer"},subheader:{}}}));t.default=function(){var e=F(),t=Object(I.a)(),a=Object(R.a)(),c=Object(_.a)().t,E=Object(O.useContext)(P.a).contentTransMode,D=Object(M.c)(E),L=Object(M.b)("stamps"),K=Object(r.a)(L,1)[0],W=Object(O.useState)([]),G=Object(r.a)(W,2),J=G[0],q=G[1],U=Object(M.e)([]),$=Object(r.a)(U,3),Q=$[0],X=$[1],Y=$[2],Z=Object(O.useState)(!1),ee=Object(r.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(O.useState)("asc"),re=Object(r.a)(ne,2),ce=re[0],ie=re[1],oe=Object(O.useReducer)(H.a,[]),se=Object(r.a)(oe,2),le=se[0],ue=se[1],me=Object(M.e)(0),de=Object(r.a)(me,3),be=de[0],fe=de[1],pe=de[2],he=Object(M.e)(12),ge=Object(r.a)(he,2),ve=ge[0],Oe=ge[1],je=Object(M.e)(!0),Ee=Object(r.a)(je,3),ye=Ee[1],Ne=Ee[2],xe=Object(M.e)(!1),ke=Object(r.a)(xe,3),we=ke[1],ze=ke[2],Ce=Object(O.useCallback)((function(e,t){return Q.slice(t*(e-1),t*e)}),[Q]);Object(O.useEffect)((function(){document.title=c("title:stampList")}),[c]),Object(O.useEffect)((function(){if(K.length){var e=K;e=le.length?K.filter((function(e){return le.includes(e.characterId1)})):K,"desc"===ce?e=e.sort((function(e,t){return t.id-e.id})):"asc"===ce&&(e=e.sort((function(e,t){return e.id-t.id}))),Y(e),q([]),pe(0)}}),[le,K,q,pe,Y,ce]),Object(O.useEffect)((function(){q((function(e){return[].concat(Object(n.a)(e),Object(n.a)(Ce(be,ve)))})),Ne(!0)}),[be,ve,Ne,K,Ce]),Object(O.useEffect)((function(){ze(Boolean(K.length))}),[ze,K]);return j.a.createElement(O.Fragment,null,j.a.createElement(s.a,{variant:"h6",className:t.header},c("common:stamp")),j.a.createElement(m.a,{className:t.content},j.a.createElement(d.a,{container:!0,justify:"space-between"},j.a.createElement(b.a,{color:"primary",style:{marginBottom:"1%"}},j.a.createElement(f.a,{size:"medium",onClick:function(){return ie("asc")}},j.a.createElement(y,null),"asc"===ce?j.a.createElement(N,null):j.a.createElement(x,null)),j.a.createElement(f.a,{size:"medium",onClick:function(){return ie("desc")}},j.a.createElement(y,null),"desc"===ce?j.a.createElement(k,null):j.a.createElement(w,null))),j.a.createElement(b.a,{color:"primary",style:{marginBottom:"1%"}},j.a.createElement(f.a,{size:"medium",onClick:function(){return ae((function(e){return!e}))}},te?j.a.createElement(T.e,null):j.a.createElement(T.f,null),te?j.a.createElement(z.a,null):j.a.createElement(C.a,null)))),j.a.createElement(p.a,{in:te},j.a.createElement(h.a,{className:a.container},j.a.createElement(d.a,{container:!0,direction:"column",spacing:1},j.a.createElement(d.a,{item:!0,container:!0,xs:12,alignItems:"center",justify:"space-between"},j.a.createElement(d.a,{item:!0,xs:12,md:2},j.a.createElement(s.a,{classes:{root:a.caption}},c("filter:character.caption"))),j.a.createElement(d.a,{item:!0,container:!0,xs:12,md:9,spacing:1},Array.from({length:26}).map((function(e,t){return j.a.createElement(d.a,{key:"chara-filter-"+t,item:!0},j.a.createElement(g.a,{clickable:!0,color:le.includes(t+1)?"primary":"default",avatar:j.a.createElement(v.a,{alt:D(t+1),src:V.f["CharaIcon".concat(t+1)]}),label:D(t+1),onClick:function(){le.includes(t+1)?ue({type:"remove",payload:t+1}):ue({type:"add",payload:t+1})}}))}))))))),Object(B.a)({viewComponent:function(t){var a=t.data;return a?j.a.createElement(l.a,{href:"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/stamp/").concat(a.assetbundleName,"_rip/").concat(a.assetbundleName,"/").concat(a.assetbundleName,".webp"),target:"_blank",style:{textDecoration:"none"}},j.a.createElement(i.a,{className:e.card},j.a.createElement(u.a,{className:e.media,image:"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/stamp/").concat(a.assetbundleName,"_rip/").concat(a.assetbundleName,"/").concat(a.assetbundleName,".webp"),title:a.name}),j.a.createElement(o.a,{style:{paddingBottom:"16px"}},j.a.createElement(A.b,{mode:E,contentKey:"stamp_name:".concat(a.id),original:a.name.replace(/\[.*\]/,"").replace(/^.*\uff1a/,""),originalProps:{variant:"subtitle1"},translatedProps:{variant:"subtitle1"}})))):j.a.createElement(i.a,{className:e.card},j.a.createElement(S.a,{variant:"rect",className:e.media}),j.a.createElement(o.a,null,j.a.createElement(s.a,{variant:"subtitle1",className:e.subheader},j.a.createElement(S.a,{variant:"text",width:"90%"}))))},callback:function(e,t){we.current&&(e[0].isIntersecting&&ye.current&&(!X.current.length||X.current.length>fe.current*Oe.current)?(pe((function(e){return e+1})),Ne(!1)):X.current.length&&X.current.length<=fe.current*Oe.current&&t(!1))},data:J,gridSize:{xs:4,sm:3,md:3,lg:2}})))}}}]);
//# sourceMappingURL=23.2bc780df.chunk.js.map
(this["webpackJsonpsekai-viewer"]=this["webpackJsonpsekai-viewer"]||[]).push([[18],{5955:function(e,t,a){"use strict";a.d(t,"e",(function(){return m})),a.d(t,"b",(function(){return f})),a.d(t,"d",(function(){return b})),a.d(t,"a",(function(){return g})),a.d(t,"c",(function(){return v}));var n=a(5966),r=a.n(n),c=a(5967),i=a(32),o=a(5964),s=a.n(o),l=a(0),u=a(50);function m(e){var t=Object(l.useState)(e),a=Object(i.a)(t,2),n=a[0],r=a[1],c=Object(l.useRef)(n);return Object(l.useEffect)((function(){c.current=n}),[n]),[n,c,r]}var d={};function f(e){var t=m([]),a=Object(i.a)(t,3),n=a[0],o=a[1],u=a[2],f=Object(l.useCallback)(Object(c.a)(r.a.mark((function t(){var a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.get("https://raw.githubusercontent.com/Sekai-World/sekai-master-db-diff/master/".concat(e,".json"));case 2:return a=t.sent,n=a.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)}))),[e]);return Object(l.useEffect)((function(){d[e]&&d[e].length?u(d[e]):f().then((function(t){u(t),d[e]=t}))}),[f,e,u]),[n,o]}function b(e){var t=m({time:0,first10:[],rank20:[],rank30:[],rank40:[],rank50:[],rank100:[],rank200:[],rank300:[],rank400:[],rank500:[],rank1000:[],rank2000:[],rank3000:[],rank4000:[],rank5000:[],rank10000:[],rank20000:[],rank30000:[],rank40000:[],rank50000:[],rank100000:[]}),a=Object(i.a)(t,3),n=a[0],o=a[1],u=a[2];return[Object(l.useCallback)(Object(c.a)(r.a.mark((function t(){var a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.get("https://bitbucket.org/sekai-world/sekai-event-track/raw/main/event".concat(e,".json?t=").concat(Date.now()));case 2:return a=t.sent,n=a.data,u(n),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)}))),[e,u]),n,o]}var g={all:"All",vocaloid:"Vocaloid",light_music_club:"Light Music Club",idol:"Idol",school_refusal:"School Refusal",theme_park:"Theme Park",street:"Street"};function v(e){var t=f("gameCharacters"),a=Object(i.a)(t,1)[0],n=Object(u.b)(),r=n.assetT,c=n.assetI18n;return Object(l.useCallback)((function(t){var n=a.find((function(e){return e.id===t}));if(null===n||void 0===n?void 0:n.firstName)switch(e){case"original":return"".concat(n.firstName," ").concat(n.givenName);case"translated":return["zh-CN","zh-TW","ko","ja"].includes(c.language)?"".concat(r("character_name:".concat(t,".firstName"),n.firstName)," ").concat(r("character_name:".concat(t,".givenName"),n.givenName)):"".concat(r("character_name:".concat(t,".givenName"),n.givenName)," ").concat(r("character_name:".concat(t,".firstName"),n.firstName));case"both":return"".concat(n.firstName," ").concat(n.givenName," | ")+(["zh-CN","zh-TW","ko","ja"].includes(c.language)?"".concat(r("character_name:".concat(t,".firstName"),n.firstName)," ").concat(r("character_name:".concat(t,".givenName"),n.givenName)):"".concat(r("character_name:".concat(t,".givenName"),n.givenName)," ").concat(r("character_name:".concat(t,".firstName"),n.firstName)))}return null===n||void 0===n?void 0:n.givenName}),[c.language,r,a,e])}},5956:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(5910),r=Object(n.a)((function(e){return{header:{fontWeight:"bold"},content:{marginTop:e.spacing(3),marginBottom:e.spacing(3),marginLeft:"auto",marginRight:"auto"}}}))},5957:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return m})),a.d(t,"c",(function(){return d}));var n=a(32),r=a(42),c=a(6092),i=a(0),o=a.n(i),s=a(5955),l=a(50),u=function(e){var t=e.mode,a=e.contentKey,n=e.original,i=e.originalProps,s=e.translatedProps,u=e.assetTOptions,m=Object(l.b)().assetT;switch(t){case"original":return o.a.createElement(r.a,i,n);case"translated":return o.a.createElement(r.a,s,m(a,n,u));case"both":return o.a.createElement(c.a,{container:!0,direction:"column"},o.a.createElement(r.a,Object.assign({},i,{color:"textPrimary"}),n),o.a.createElement(r.a,Object.assign({},s,{color:"textSecondary"}),m(a,n,u)))}},m=function(e){var t=e.mode,a=e.characterId,u=e.originalProps,m=e.translatedProps,d=e.assetTOptions,f=Object(s.b)("gameCharacters"),b=Object(n.a)(f,1)[0],g=Object(l.b)(),v=g.assetT,h=g.assetI18n,p=Object(i.useState)(),O=Object(n.a)(p,2),j=O[0],N=O[1];if(Object(i.useEffect)((function(){b.length&&N(b.find((function(e){return e.id===a})))}),[b,a]),!j)return o.a.createElement(r.a,null);switch(t){case"original":return o.a.createElement(r.a,u,j.firstName," ",j.givenName);case"translated":return["zh-CN","zh-TW","ko","ja"].includes(h.language)?o.a.createElement(r.a,m,j.firstName?v("character_name:".concat(a,".firstName"),j.firstName,d):""," ",v("character_name:".concat(a,".givenName"),j.givenName,d)):o.a.createElement(r.a,null,v("character_name:".concat(a,".givenName"),j.givenName,d)," ",j.firstName?v("character_name:".concat(a,".firstName"),j.firstName,d):"");case"both":return o.a.createElement(c.a,{container:!0,direction:"column"},o.a.createElement(r.a,u,j.firstName," ",j.givenName),["zh-CN","zh-TW","ko","ja"].includes(h.language)?o.a.createElement(r.a,Object.assign({color:"textSecondary"},m),j.firstName?v("character_name:".concat(a,".firstName"),j.firstName,d):""," ",v("character_name:".concat(a,".givenName"),j.givenName,d)):o.a.createElement(r.a,Object.assign({color:"textSecondary"},m),v("character_name:".concat(a,".givenName"),j.givenName,d)," ",j.firstName?v("character_name:".concat(a,".firstName"),j.firstName,d):""))}},d=function(e){var t=e.mode,a=e.releaseCondId,r=e.originalProps,c=e.translatedProps,l=e.assetTOptions,m=Object(s.b)("releaseConditions"),d=Object(n.a)(m,1)[0],f=Object(i.useState)(),b=Object(n.a)(f,2),g=b[0],v=b[1];if(Object(i.useEffect)((function(){d.length&&v(d.find((function(e){return e.id===a})))}),[a,d]),g){var h="";switch(g.releaseConditionType){case"none":h="release_cond:none_".concat(g.id);break;case"card_level":h="release_cond:card_level",l=Object.assign({},l,{level:g.releaseConditionTypeLevel});break;default:h="release_cond:".concat(g.releaseConditionType)}return o.a.createElement(u,{mode:t,contentKey:h,original:g.sentence,originalProps:r,translatedProps:c,assetTOptions:l})}return o.a.createElement("div",null)}},5962:function(e,t,a){"use strict";var n=a(32),r=a(65),c=a(18),i=a(5924),o=a(6092),s=a(0),l=a.n(s),u=["xs","sm","md","lg","xl"],m={xs:12,md:4};t.a=function(e){var t=e.viewComponent,a=e.callback,d=e.data,f=function(e){var t=Object(r.a)({},e||m);return u.forEach((function(e,a,n){t[e]||(t[e]=a>0?t[n[a-1]]:12)})),t}(e.gridSize),b=function(){var e=Object(c.a)();return u.map((function(t){return Object(i.a)(e.breakpoints.down(t))&&t})).find(Boolean)||u[u.length-1]}(),g=Object(s.useState)(!0),v=Object(n.a)(g,2),h=v[0],p=v[1],O=Object(s.useRef)(new IntersectionObserver((function(e){return a(e,p)}),{threshold:.5})),j=Object(s.useRef)(null);Object(s.useEffect)((function(){p(!0)}),[d]),Object(s.useEffect)((function(){var e=O.current,t=j.current;return t&&e.observe(t),function(){t&&e.unobserve(t)}}));var N=12/f[b],k=d.length?N:2*N;return l.a.createElement(s.Fragment,null,l.a.createElement(o.a,{container:!0,direction:"row",spacing:1},d.length?d.map((function(e,a){return l.a.createElement(o.a,{key:a,item:!0,xs:f.xs,sm:f.sm,md:f.md,lg:f.lg,xl:f.xl},t({data:e,index:a}))})):null),l.a.createElement(o.a,{container:!0,direction:"row",ref:j,style:{display:h?"flex":"none",paddingTop:"4px"},spacing:1},Array.from({length:k}).map((function(e,a){return l.a.createElement(o.a,{key:"empty-".concat(a),item:!0,xs:f.xs,sm:f.sm,md:f.md,lg:f.lg,xl:f.xl},t({}))}))))}},6031:function(e,t,a){"use strict";var n=a(1),r=a(2),c=a(0),i=(a(4),a(3)),o=a(5),s=["video","audio","picture","iframe","img"],l=c.forwardRef((function(e,t){var a=e.children,o=e.classes,l=e.className,u=e.component,m=void 0===u?"div":u,d=e.image,f=e.src,b=e.style,g=Object(r.a)(e,["children","classes","className","component","image","src","style"]),v=-1!==s.indexOf(m),h=!v&&d?Object(n.a)({backgroundImage:'url("'.concat(d,'")')},b):b;return c.createElement(m,Object(n.a)({className:Object(i.a)(o.root,l,v&&o.media,-1!=="picture img".indexOf(m)&&o.img),ref:t,style:h,src:v?d||f:void 0},g),a)}));t.a=Object(o.a)({root:{display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},media:{width:"100%"},img:{objectFit:"cover"}},{name:"MuiCardMedia"})(l)},6032:function(e,t,a){"use strict";var n=a(1),r=a(2),c=a(0),i=a(3),o=(a(4),a(12)),s=a(5),l=c.forwardRef((function(e,t){var a=e.animation,o=void 0===a?"pulse":a,s=e.classes,l=e.className,u=e.component,m=void 0===u?"span":u,d=e.height,f=e.variant,b=void 0===f?"text":f,g=e.width,v=Object(r.a)(e,["animation","classes","className","component","height","variant","width"]),h=Boolean(v.children);return c.createElement(m,Object(n.a)({ref:t,className:Object(i.a)(s.root,s[b],l,h&&[s.withChildren,!g&&s.fitContent,!d&&s.heightAuto],!1!==o&&s[o])},v,{style:Object(n.a)({width:g,height:d},v.style)}))}));t.a=Object(s.a)((function(e){return{root:{display:"block",backgroundColor:Object(o.c)(e.palette.text.primary,"light"===e.palette.type?.11:.13),height:"1.2em"},text:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 60%",transform:"scale(1, 0.60)",borderRadius:e.shape.borderRadius,"&:empty:before":{content:'"\\00a0"'}},rect:{},circle:{borderRadius:"50%"},pulse:{animation:"$pulse 1.5s ease-in-out 0.5s infinite"},"@keyframes pulse":{"0%":{opacity:1},"50%":{opacity:.4},"100%":{opacity:1}},wave:{position:"relative",overflow:"hidden","&::after":{animation:"$wave 1.6s linear 0.5s infinite",background:"linear-gradient(90deg, transparent, ".concat(e.palette.action.hover,", transparent)"),content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}},"@keyframes wave":{"0%":{transform:"translateX(-100%)"},"60%":{transform:"translateX(100%)"},"100%":{transform:"translateX(100%)"}},withChildren:{"& > *":{visibility:"hidden"}},fitContent:{maxWidth:"fit-content"},heightAuto:{height:"auto"}}}),{name:"MuiSkeleton"})(l)},6033:function(e,t,a){"use strict";var n=a(1),r=a(2),c=a(0),i=(a(4),a(3)),o=a(112),s=a(5),l=c.forwardRef((function(e,t){var a=e.classes,s=e.className,l=e.raised,u=void 0!==l&&l,m=Object(r.a)(e,["classes","className","raised"]);return c.createElement(o.a,Object(n.a)({className:Object(i.a)(a.root,s),elevation:u?8:1,ref:t},m))}));t.a=Object(s.a)({root:{overflow:"hidden"}},{name:"MuiCard"})(l)},6043:function(e,t,a){"use strict";var n=a(1),r=a(2),c=a(0),i=(a(4),a(3)),o=a(5),s=c.forwardRef((function(e,t){var a=e.classes,o=e.className,s=e.component,l=void 0===s?"div":s,u=Object(r.a)(e,["classes","className","component"]);return c.createElement(l,Object(n.a)({className:Object(i.a)(a.root,o),ref:t},u))}));t.a=Object(o.a)({root:{padding:16,"&:last-child":{paddingBottom:24}}},{name:"MuiCardContent"})(s)},6195:function(e,t,a){"use strict";a.r(t);var n=a(54),r=a(32),c=a(5910),i=a(6033),o=a(6043),s=a(42),l=a(6031),u=a(6092),m=a(5938),d=a(5956),f=a(6032),b=a(0),g=a.n(b),v=a(11),h=a(52),p=a(5955),O=a(5962),j=a(5883),N=a(50),k=a(51),E=a(5957),w=Object(c.a)((function(e){return{media:{paddingTop:"56.25%",backgroundSize:"contain"},card:{cursor:"pointer"},header:{},"grid-out":{padding:e.spacing("1%","2%")}}}));t.default=function(){var e=w(),t=Object(d.a)(),a=Object(v.h)().path,c=Object(j.a)().t,y=Object(N.b)().getTranslated,x=Object(b.useContext)(k.a).contentTransMode,_=Object(b.useState)([]),C=Object(r.a)(_,2),T=C[0],S=C[1],R=Object(p.b)("events"),z=Object(r.a)(R,2),P=z[0],I=z[1],B=Object(b.useState)(localStorage.getItem("event-list-grid-view-type")||"grid"),M=Object(r.a)(B,1)[0],W=Object(p.e)(1),A=Object(r.a)(W,3),L=A[0],X=A[1],F=A[2],K=Object(p.e)(12),D=Object(r.a)(K,2),J=D[0],$=D[1],V=Object(p.e)(!0),q=Object(r.a)(V,3),G=q[1],H=q[2],Q=Object(p.e)(!1),U=Object(r.a)(Q,3),Y=U[1],Z=U[2];Object(b.useEffect)((function(){document.title=c("title:eventList")}),[c]),Object(b.useEffect)((function(){S((function(e){return[].concat(Object(n.a)(e),Object(n.a)(function(e,t,a){return e.slice(a*(t-1),a*t)}(P,L,J)))})),H(!0)}),[L,J,H,P]),Object(b.useEffect)((function(){Z(Boolean(P.length))}),[Z,P]);var ee={grid:function(t){var n=t.data;return n?g.a.createElement(h.b,{to:a+"/"+n.id,style:{textDecoration:"none"}},g.a.createElement(i.a,{className:e.card},g.a.createElement(l.a,{className:e.media,image:"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/event/").concat(n.assetbundleName,"/logo_rip/logo.webp"),title:y(x,"event_name:".concat(n.id),n.name)}),g.a.createElement(o.a,{style:{paddingBottom:"16px"}},g.a.createElement(u.a,{container:!0,direction:"column",spacing:1},g.a.createElement(u.a,{item:!0},g.a.createElement(E.b,{mode:x,contentKey:"event_name:".concat(n.id),original:n.name,originalProps:{variant:"subtitle1",className:e.header}})),g.a.createElement(u.a,{item:!0},g.a.createElement(s.a,{variant:"body2",color:"textSecondary"},c("event:type.".concat(n.eventType)))))))):g.a.createElement(i.a,{className:e.card},g.a.createElement(f.a,{variant:"rect",className:e.media}),g.a.createElement(o.a,null,g.a.createElement(s.a,{variant:"subtitle1",className:e.header},g.a.createElement(f.a,{variant:"text",width:"90%"})),g.a.createElement(s.a,{variant:"body2"},g.a.createElement(f.a,{variant:"text",width:"40%"}))))}};return g.a.createElement(b.Fragment,null,g.a.createElement(s.a,{variant:"h6",className:t.header},c("common:event")),g.a.createElement(m.a,{className:t.content},Object(O.a)({viewComponent:ee[M],callback:function(e,t){Y.current&&(e[0].isIntersecting&&G.current&&(!I.current.length||I.current.length>X.current*$.current)?(F((function(e){return e+1})),H(!1)):I.current.length&&I.current.length<=X.current*$.current&&t(!1))},data:T,gridSize:{grid:{xs:12,sm:6,md:4,lg:3},agenda:{xs:12},comfy:{xs:12}}[M]})))}}}]);
//# sourceMappingURL=18.96931482.chunk.js.map
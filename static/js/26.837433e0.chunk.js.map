{"version":3,"sources":["utils/index.ts","styles/layout.ts","styles/interactive.ts","components/Home.tsx"],"names":["useRefState","initialValue","useState","state","setState","stateRef","useRef","useEffect","current","masterDataCache","useCachedData","name","cached","cachedRef","setCached","fetchCached","useCallback","a","Axios","get","data","length","then","useRealtimeEventData","eventId","time","first10","rank20","rank30","rank40","rank50","rank100","rank200","rank300","rank400","rank500","rank1000","rank2000","rank3000","rank4000","rank5000","rank10000","rank20000","rank30000","rank40000","rank50000","rank100000","eventRealtimeData","eventRealtimeDataRef","setEventRealtimeData","Date","now","musicTagToName","all","vocaloid","light_music_club","idol","school_refusal","theme_park","street","useCharaName","contentTransMode","charas","useAssetI18n","assetT","assetI18n","charaId","chara","find","id","firstName","givenName","includes","language","useLayoutStyles","makeStyles","theme","header","fontWeight","content","marginTop","spacing","marginBottom","marginLeft","marginRight","useInteractiveStyles","container","margin","padding","caption","breakpoints","up","textAlign","sliderContainer","paddingRight","useStyles","alert","paddingTop","getWebpDetectSeverity","detected","webp","webpLossless","webpAlpha","useIframeStyle","iframe","down","width","height","InfoInternalDialog","props","classes","open","onClose","title","className","src","url","InfoInternal","color","onClick","Home","useTheme","layoutClasses","interactiveClasses","t","useTranslation","informations","gameNewsTag","setGameNewsTag","setOpen","info","setInfo","document","setDetected","Number","Modernizr","webplossless","webpalpha","isUpMd","useMediaQuery","columns","field","headerName","renderCell","params","browseType","target","href","path","sortable","valueFormatter","getValue","toLocaleString","sortDirection","variant","justify","item","xs","md","lg","process","alt","style","severity","i18nKey","components","s","fontSize","to","textDecoration","l","value","onChange","e","v","scrollButtons","label","pagination","autoPageSize","rows","filter","informationTag"],"mappings":"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","file":"static/js/26.837433e0.chunk.js","sourcesContent":["import { IUnitProfile } from \"./../types.d\";\nimport Axios from \"axios\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport {\n  IGachaInfo,\n  ICardInfo,\n  IGameChara,\n  IMusicInfo,\n  ISkillInfo,\n  ICardRarity,\n  ICharacterRank,\n  IMusicVocalInfo,\n  IOutCharaProfile,\n  IUserInformationInfo,\n  IMusicDifficultyInfo,\n  IMusicTagInfo,\n  IReleaseCondition,\n  IMusicDanceMembers,\n  IEventInfo,\n  IEventDeckBonus,\n  IGameCharaUnit,\n  IEventRealtimeRank,\n  IResourceBoxInfo,\n  IHonorInfo,\n  ICardEpisode,\n  ContentTransModeType,\n  ITipInfo,\n  ICharaProfile,\n} from \"../types\";\nimport { useAssetI18n } from \"./i18n\";\n\nexport function useRefState<S>(\n  initialValue: S\n): [S, React.MutableRefObject<S>, React.Dispatch<React.SetStateAction<S>>] {\n  const [state, setState] = useState(initialValue);\n  const stateRef = useRef(state);\n  useEffect(() => {\n    stateRef.current = state;\n  }, [state]);\n  return [state, stateRef, setState];\n}\n\nlet masterDataCache: { [key: string]: any[] } = {};\n\nexport function useCachedData<\n  T extends\n    | IGachaInfo\n    | ICardInfo\n    | IGameChara\n    | IMusicInfo\n    | ISkillInfo\n    | ICardRarity\n    | ICharacterRank\n    | IMusicVocalInfo\n    | IOutCharaProfile\n    | IUserInformationInfo\n    | IMusicDifficultyInfo\n    | IMusicTagInfo\n    | IReleaseCondition\n    | IMusicDanceMembers\n    | IEventInfo\n    | IEventDeckBonus\n    | IGameCharaUnit\n    | IResourceBoxInfo\n    | IHonorInfo\n    | ICardEpisode\n    | ITipInfo\n    | ICharaProfile\n    | IUnitProfile\n>(name: string): [T[], React.MutableRefObject<T[]>] {\n  const [cached, cachedRef, setCached] = useRefState<T[]>([]);\n\n  const fetchCached = useCallback(async () => {\n    const { data }: { data: T[] } = await Axios.get(\n      `https://raw.githubusercontent.com/Sekai-World/sekai-master-db-diff/master/${name}.json`\n    );\n    return data;\n  }, [name]);\n\n  useEffect(() => {\n    if (masterDataCache[name] && masterDataCache[name].length)\n      setCached(masterDataCache[name]);\n    else\n      fetchCached().then((data) => {\n        setCached(data);\n        masterDataCache[name] = data;\n      });\n  }, [fetchCached, name, setCached]);\n\n  return [cached, cachedRef];\n}\n\nexport function useRealtimeEventData(\n  eventId: number\n): [\n  () => Promise<IEventRealtimeRank>,\n  IEventRealtimeRank,\n  React.MutableRefObject<IEventRealtimeRank>\n] {\n  const [\n    eventRealtimeData,\n    eventRealtimeDataRef,\n    setEventRealtimeData,\n  ] = useRefState<IEventRealtimeRank>({\n    time: 0,\n    first10: [],\n    rank20: [],\n    rank30: [],\n    rank40: [],\n    rank50: [],\n    rank100: [],\n    rank200: [],\n    rank300: [],\n    rank400: [],\n    rank500: [],\n    rank1000: [],\n    rank2000: [],\n    rank3000: [],\n    rank4000: [],\n    rank5000: [],\n    rank10000: [],\n    rank20000: [],\n    rank30000: [],\n    rank40000: [],\n    rank50000: [],\n    rank100000: [],\n  });\n\n  const refreshData = useCallback(async () => {\n    const { data }: { data: IEventRealtimeRank } = await Axios.get(\n      `https://bitbucket.org/sekai-world/sekai-event-track/raw/main/event${eventId}.json?t=${Date.now()}`\n    );\n\n    setEventRealtimeData(data);\n    return data;\n  }, [eventId, setEventRealtimeData]);\n\n  return [refreshData, eventRealtimeData, eventRealtimeDataRef];\n}\n\nexport const musicCategoryToName: { [key: string]: string } = {\n  mv: \"3D MV\",\n  original: \"Original MV\",\n  sekai: \"Sekai MV\",\n  image: \"Static Image\",\n  mv_2d: \"2D MV\",\n};\n\nexport const musicTagToName: { [key: string]: string } = {\n  all: \"All\",\n  vocaloid: \"Vocaloid\",\n  light_music_club: \"Light Music Club\",\n  idol: \"Idol\",\n  school_refusal: \"School Refusal\",\n  theme_park: \"Theme Park\",\n  street: \"Street\",\n};\n\nexport function useCharaName(contentTransMode: ContentTransModeType) {\n  const [charas] = useCachedData<IGameChara>(\"gameCharacters\");\n  const { assetT, assetI18n } = useAssetI18n();\n  return useCallback(\n    (charaId: number): string | undefined => {\n      const chara = charas.find((chara) => chara.id === charaId);\n      if (chara?.firstName) {\n        switch (contentTransMode) {\n          case \"original\":\n            return `${chara.firstName} ${chara.givenName}`;\n          case \"translated\":\n            return [\"zh-CN\", \"zh-TW\", \"ko\", \"ja\"].includes(assetI18n.language)\n              ? `${assetT(\n                  `character_name:${charaId}.firstName`,\n                  chara.firstName\n                )} ${assetT(\n                  `character_name:${charaId}.givenName`,\n                  chara.givenName\n                )}`\n              : `${assetT(\n                  `character_name:${charaId}.givenName`,\n                  chara.givenName\n                )} ${assetT(\n                  `character_name:${charaId}.firstName`,\n                  chara.firstName\n                )}`;\n          case \"both\":\n            return (\n              `${chara.firstName} ${chara.givenName} | ` +\n              ([\"zh-CN\", \"zh-TW\", \"ko\", \"ja\"].includes(assetI18n.language)\n                ? `${assetT(\n                    `character_name:${charaId}.firstName`,\n                    chara.firstName\n                  )} ${assetT(\n                    `character_name:${charaId}.givenName`,\n                    chara.givenName\n                  )}`\n                : `${assetT(\n                    `character_name:${charaId}.givenName`,\n                    chara.givenName\n                  )} ${assetT(\n                    `character_name:${charaId}.firstName`,\n                    chara.firstName\n                  )}`)\n            );\n        }\n      }\n      return chara?.givenName;\n    },\n    [assetI18n.language, assetT, charas, contentTransMode]\n  );\n}\n","import { makeStyles } from \"@material-ui/core\";\n\nconst useLayoutStyles = makeStyles((theme) => ({\n  header: {\n    fontWeight: \"bold\",\n  },\n  content: {\n    marginTop: theme.spacing(3),\n    marginBottom: theme.spacing(3),\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n  },\n}));\n\nexport { useLayoutStyles };\n","import { makeStyles } from \"@material-ui/core\";\n\nconst useInteractiveStyles = makeStyles((theme) => ({\n  container: {\n    margin: theme.spacing(1, 0),\n    padding: theme.spacing(1, 2),\n  },\n  caption: {\n    [theme.breakpoints.up(\"md\")]: {\n      textAlign: \"right\",\n    },\n  },\n  sliderContainer: {\n    [theme.breakpoints.up(\"md\")]: {\n      paddingRight: theme.spacing(5),\n    },\n  },\n}));\n\nexport { useInteractiveStyles };\n","import {\n  Dialog,\n  IconButton,\n  Link,\n  makeStyles,\n  Paper,\n  Tab,\n  Tabs,\n  // Theme,\n  Typography,\n  Container,\n  useMediaQuery,\n  useTheme,\n  Grid,\n} from \"@material-ui/core\";\nimport { useLayoutStyles } from \"../styles/layout\";\nimport { useInteractiveStyles } from \"../styles/interactive\";\nimport { ColDef, DataGrid, ValueFormatterParams } from \"@material-ui/data-grid\";\nimport {\n  GitHub,\n  OpenInNew,\n  Settings,\n  Translate,\n  Twitter,\n} from \"@material-ui/icons\";\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\nimport { Discord, Patreon } from \"mdi-material-ui\";\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport { Trans, useTranslation } from \"react-i18next\";\nimport { Link as RouteLink } from \"react-router-dom\";\nimport { IUserInformationInfo } from \"../types\";\nimport { useCachedData } from \"../utils\";\n\nconst useStyles = makeStyles((theme) => ({\n  alert: {\n    margin: theme.spacing(2, 0),\n  },\n  \"contact-link\": {\n    margin: theme.spacing(0, 0.5),\n  },\n  \"game-news-title\": {\n    paddingTop: theme.spacing(2),\n  },\n}));\n\ninterface IDetectResult {\n  webp: number;\n  webpLossless: number;\n  webpAlpha: number;\n}\n\nfunction getWebpDetectSeverity(detected: IDetectResult) {\n  const sum = detected.webp + detected.webpLossless + detected.webpAlpha;\n  switch (sum) {\n    case -3:\n      return \"info\";\n    case 0:\n      return \"error\";\n    case 3:\n      return \"success\";\n    default:\n      return \"warning\";\n  }\n}\n\n// function getWebpDetectDesc(t: TFunction, result: number) {\n//   switch (result) {\n//     case -1:\n//       return t(\"common:detect.checking\");\n//     case 0:\n//       return t(\"common:detect.unsupported\");\n//     case 1:\n//       return t(\"common:detect.supported\");\n//     default:\n//       return \"\";\n//   }\n// }\n\nconst useIframeStyle = makeStyles((theme) => ({\n  iframe: {\n    [theme.breakpoints.down(\"sm\")]: {\n      width: \"300px\",\n      height: \"480px\",\n    },\n    [theme.breakpoints.up(\"md\")]: {\n      width: \"600px\",\n      height: \"480px\",\n    },\n  },\n}));\n\nfunction InfoInternalDialog(props: {\n  url: string;\n  open: boolean;\n  onClose: (event: {}, reason: \"backdropClick\" | \"escapeKeyDown\") => void;\n  title: string;\n}) {\n  const classes = useIframeStyle();\n  return (\n    <Dialog open={props.open} onClose={props.onClose}>\n      <Typography>{props.title}</Typography>\n      <iframe\n        className={classes.iframe}\n        title={props.title}\n        src={props.url}\n      ></iframe>\n    </Dialog>\n  );\n}\n\nfunction InfoInternal(props: { onClick: () => void }) {\n  return (\n    <IconButton color=\"primary\" onClick={props.onClick}>\n      <OpenInNew></OpenInNew>\n    </IconButton>\n  );\n}\n\nfunction Home() {\n  const theme = useTheme();\n  const classes = useStyles();\n  const layoutClasses = useLayoutStyles();\n  const interactiveClasses = useInteractiveStyles();\n  const { t } = useTranslation();\n\n  const [informations] = useCachedData<IUserInformationInfo>(\n    \"userInformations\"\n  );\n\n  const [gameNewsTag, setGameNewsTag] = useState<string>(\"information\");\n  const [open, setOpen] = useState<boolean>(false);\n  const [info, setInfo] = useState<IUserInformationInfo>();\n\n  useEffect(() => {\n    document.title = t(\"title:home\");\n  }, [t]);\n\n  const [detected, setDetected] = useState<IDetectResult>({\n    webp: -1,\n    webpLossless: -1,\n    webpAlpha: -1,\n  });\n\n  useEffect(() => {\n    setDetected({\n      webp: Number(Modernizr.webp),\n      webpLossless: Number(Modernizr.webplossless),\n      webpAlpha: Number(Modernizr.webpalpha),\n    });\n  }, []);\n\n  const isUpMd = useMediaQuery(theme.breakpoints.up(\"md\"));\n\n  const columns: ColDef[] = [\n    {\n      field: \"action\",\n      headerName: t(\"home:game-news.action\"),\n      width: 80,\n      renderCell: (params: ValueFormatterParams) => {\n        const info = params.data as IUserInformationInfo;\n        return info.browseType === \"internal\" ? (\n          <InfoInternal\n            onClick={() => {\n              setInfo(info);\n              setOpen(true);\n            }}\n          />\n        ) : (\n          <Link target=\"_blank\" href={info.path}>\n            <IconButton color=\"primary\">\n              <OpenInNew></OpenInNew>\n            </IconButton>\n          </Link>\n        );\n      },\n      sortable: false,\n    },\n    // { field: \"id\", headerName: \"ID\", width: 60 },\n    {\n      field: \"startAt\",\n      headerName: t(\"home:game-news.show-from\"),\n      width: 200,\n      valueFormatter: (params: ValueFormatterParams) =>\n        new Date(params.getValue(\"startAt\") as number).toLocaleString(),\n      sortDirection: \"desc\",\n    },\n    {\n      field: \"title\",\n      headerName: t(\"home:game-news.title-column\"),\n      width: isUpMd ? 600 : 150,\n      sortable: false,\n    },\n    {\n      field: \"endAt\",\n      headerName: t(\"home:game-news.show-until\"),\n      width: 200,\n      valueFormatter: (params: ValueFormatterParams) =>\n        new Date(params.getValue(\"startAt\") as number).toLocaleString(),\n    },\n  ];\n\n  return (\n    <Fragment>\n      <Typography variant=\"h6\" className={layoutClasses.header}>\n        {t(\"common:home\")}\n      </Typography>\n      <Container className={layoutClasses.content}>\n        {/* <Typography variant=\"h4\">Welcome to Sekai Viewer Open Beta!</Typography> */}\n        <Grid container justify=\"center\">\n          <Grid item xs={12} md={8} lg={6}>\n            <img\n              src={`${process.env.PUBLIC_URL}/images/banner.png`}\n              alt=\"banner\"\n              style={{ width: \"100%\", height: \"auto\" }}\n              width=\"1500\"\n              height=\"500\"\n            />\n          </Grid>\n        </Grid>\n        <Alert className={classes.alert} severity=\"info\">\n          {t(\"home:alert0\")}\n        </Alert>\n        <Alert className={classes.alert} severity=\"info\">\n          <Trans\n            i18nKey=\"home:alert_settings\"\n            components={{ s: <Settings fontSize=\"inherit\" /> }}\n          />\n        </Alert>\n        <Alert className={classes.alert} severity=\"warning\">\n          <AlertTitle>{t(\"home:alert1.title\")}</AlertTitle>\n          <Link\n            href=\"https://www.transifex.com/dnaroma/sekai-viewer\"\n            target=\"_blank\"\n          >\n            <Translate fontSize=\"inherit\"></Translate>\n            {t(\"home:alert1.translation\")}\n          </Link>\n          （English，简中，繁中，日本語，한국어，Deutsch, Español, others upon\n          request）\n          <br></br>\n          <Link\n            href=\"https://github.com/Sekai-World/sekai-viewer\"\n            target=\"_blank\"\n          >\n            <GitHub fontSize=\"inherit\"></GitHub>\n            {t(\"home:alert1.development\")}\n          </Link>\n          （Sekai-World/sekai-viewer）\n          <br></br>\n          <Link\n            href=\"https://www.patreon.com/bePatron?u=6503151\"\n            target=\"_blank\"\n          >\n            <Patreon fontSize=\"inherit\"></Patreon>\n            Patreon\n          </Link>\n          <br></br>\n          <RouteLink to=\"/about\" style={{ textDecoration: \"none\" }}>\n            <Link>\n              <OpenInNew fontSize=\"inherit\" />{\" \"}\n              {t(\"home:alert1.see_contrib_list\")}\n            </Link>\n          </RouteLink>\n          <br></br>\n          {t(\"home:alert1.contact\")}:\n          <Link\n            href=\"https://www.twitter.com/miku_zura\"\n            target=\"_blank\"\n            className={classes[\"contact-link\"]}\n          >\n            <Twitter fontSize=\"inherit\"></Twitter>\n            @miku_zura\n          </Link>\n          <Link href=\"#\" className={classes[\"contact-link\"]}>\n            <Discord fontSize=\"inherit\"></Discord>\n            DNARoma#0646\n          </Link>\n          <br></br>\n          {t(\"home:alert1.join-discord\")}\n          <Link\n            href=\"https://discord.gg/xcDBRMd\"\n            target=\"_blank\"\n            className={classes[\"contact-link\"]}\n          >\n            <Discord fontSize=\"inherit\"></Discord>\n            Sekai Viewer\n          </Link>\n        </Alert>\n        {getWebpDetectSeverity(detected) !== \"success\" ? (\n          <Alert\n            className={classes.alert}\n            severity={getWebpDetectSeverity(detected)}\n          >\n            <AlertTitle>WebP {t(\"common:support\")}</AlertTitle>\n            <Trans\n              i18nKey=\"home:detect.failed\"\n              components={{\n                l: <Link href=\"https://caniuse.com/webp\"></Link>,\n              }}\n            />\n          </Alert>\n        ) : null}\n      </Container>\n      <Typography variant=\"h6\" className={layoutClasses.header}>\n        {t(\"home:game-news.title\")}\n      </Typography>\n      <Container className={layoutClasses.content}>\n        <Paper className={interactiveClasses.container}>\n          <Tabs\n            value={gameNewsTag}\n            onChange={(e, v) => setGameNewsTag(v)}\n            variant=\"scrollable\"\n            scrollButtons=\"desktop\"\n          >\n            <Tab label={t(\"common:information\")} value=\"information\"></Tab>\n            <Tab label={t(\"common:event\")} value=\"event\"></Tab>\n            <Tab label={t(\"common:gacha\")} value=\"gacha\"></Tab>\n            <Tab label={t(\"common:music\")} value=\"music\"></Tab>\n            <Tab label={t(\"common:campaign\")} value=\"campaign\"></Tab>\n            <Tab label={t(\"common:bug\")} value=\"bug\"></Tab>\n            <Tab label={t(\"home:update\")} value=\"update\"></Tab>\n          </Tabs>\n        </Paper>\n        <div style={{ height: 650 }}>\n          <DataGrid\n            pagination\n            autoPageSize\n            rows={informations.filter(\n              (info) => info.informationTag === gameNewsTag\n            )}\n            columns={columns}\n          ></DataGrid>\n        </div>\n      </Container>\n      {info ? (\n        <InfoInternalDialog\n          url={`https://production-web.sekai.colorfulpalette.org/${info.path}`}\n          open={open}\n          onClose={() => setOpen(false)}\n          title={info.title}\n        />\n      ) : null}\n    </Fragment>\n  );\n}\n\nexport default Home;\n"],"sourceRoot":""}
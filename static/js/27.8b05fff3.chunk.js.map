{"version":3,"sources":["components/subs/ContentTrans.tsx","components/subs/ColorPreview.tsx","components/UnitDetail.tsx"],"names":["ContentTrans","mode","contentKey","original","originalProps","translatedProps","assetTOptions","assetT","useAssetI18n","container","direction","color","CharaNameTrans","characterId","useCachedData","charas","assetI18n","useState","chara","setChara","useEffect","length","find","c","id","firstName","givenName","includes","language","ReleaseCondTrans","releaseCondId","releaseConds","releaseCond","setReleaseCond","rc","i18nKey","releaseConditionType","Object","assign","level","releaseConditionTypeLevel","sentence","ColorPreview","colorCode","displayMode","localStorage","getItem","preferDarkMode","useMediaQuery","style","height","width","border","backgroundColor","useStyle","makeStyles","theme","tabpanel","padding","spacing","media","paddingTop","cursor","nameLabel","backgroundSize","nameVerticalLabel","maxWidth","unitIdTagMap","light_sound","piapro","UnitDetail","unitId","useParams","classes","layoutClasses","useLayoutStyles","t","useTranslation","getTranslated","contentTransMode","useContext","SettingContext","getCharaName","useCharaName","unitProfiles","gameCharas","musics","musicTags","unit","setUnit","unitCharas","setUnitCharas","unitMusics","setUnitMusics","document","title","name","unitName","up","filter","gc","unitMusicIds","mt","musicTag","prototype","hasOwnProperty","call","map","musicId","m","variant","className","header","content","textAlign","src","UnitLogoMap","alt","wrap","justify","alignItems","fontWeight","seq","margin","item","xs","md","profileSentence","count","uc","key","lg","to","textDecoration","charaIcons","align","um","process","assetbundleName"],"mappings":"4RAWaA,EAOR,SAAC,GAOC,IANLC,EAMI,EANJA,KACAC,EAKI,EALJA,WACAC,EAII,EAJJA,SACAC,EAGI,EAHJA,cACAC,EAEI,EAFJA,gBACAC,EACI,EADJA,cAEQC,EAAWC,cAAXD,OACR,OAAQN,GACN,IAAK,WACH,OAAO,kBAAC,IAAeG,EAAgBD,GACzC,IAAK,aACH,OACE,kBAAC,IAAeE,EACbE,EAAOL,EAAYC,EAAUG,IAGpC,IAAK,OACH,OACE,kBAAC,IAAD,CAAMG,WAAS,EAACC,UAAU,UACxB,kBAAC,IAAD,iBAAgBN,EAAhB,CAA+BO,MAAM,gBAClCR,GAEH,kBAAC,IAAD,iBAAgBE,EAAhB,CAAiCM,MAAM,kBACpCJ,EAAOL,EAAYC,EAAUG,OAO7BM,EAMR,SAAC,GAA0E,IAAxEX,EAAuE,EAAvEA,KAAMY,EAAiE,EAAjEA,YAAaT,EAAoD,EAApDA,cAAeC,EAAqC,EAArCA,gBAAiBC,EAAoB,EAApBA,cAAoB,EAC5DQ,YAA0B,kBAApCC,EADsE,sBAE/CP,cAAtBD,EAFqE,EAErEA,OAAQS,EAF6D,EAE7DA,UAF6D,EAInDC,qBAJmD,mBAItEC,EAJsE,KAI/DC,EAJ+D,KAY7E,GANAC,qBAAU,WACJL,EAAOM,QACTF,EAASJ,EAAOO,MAAK,SAACC,GAAD,OAAOA,EAAEC,KAAOX,QAEtC,CAACE,EAAQF,KAERK,EAiFF,OAAO,kBAAC,IAAD,MAhFP,OAAQjB,GACN,IAAK,WACH,OACE,kBAAC,IAAeG,EACbc,EAAMO,UADT,IACqBP,EAAMQ,WAG/B,IAAK,aACH,MAAO,CAAC,QAAS,QAAS,KAAM,MAAMC,SAASX,EAAUY,UACvD,kBAAC,IAAevB,EACba,EAAMO,UACHlB,EAAO,kBAAD,OACcM,EADd,cAEJK,EAAMO,UACNnB,GAEF,GAAI,IACPC,EAAO,kBAAD,OACaM,EADb,cAELK,EAAMQ,UACNpB,IAIJ,kBAAC,IAAD,KACGC,EAAO,kBAAD,OACaM,EADb,cAELK,EAAMQ,UACNpB,GACC,IACFY,EAAMO,UACHlB,EAAO,kBAAD,OACcM,EADd,cAEJK,EAAMO,UACNnB,GAEF,IAGV,IAAK,OACH,OACE,kBAAC,IAAD,CAAMG,WAAS,EAACC,UAAU,UACxB,kBAAC,IAAeN,EACbc,EAAMO,UADT,IACqBP,EAAMQ,WAE1B,CAAC,QAAS,QAAS,KAAM,MAAMC,SAASX,EAAUY,UACjD,kBAAC,IAAD,eAAYjB,MAAM,iBAAoBN,GACnCa,EAAMO,UACHlB,EAAO,kBAAD,OACcM,EADd,cAEJK,EAAMO,UACNnB,GAEF,GAAI,IACPC,EAAO,kBAAD,OACaM,EADb,cAELK,EAAMQ,UACNpB,IAIJ,kBAAC,IAAD,eAAYK,MAAM,iBAAoBN,GACnCE,EAAO,kBAAD,OACaM,EADb,cAELK,EAAMQ,UACNpB,GACC,IACFY,EAAMO,UACHlB,EAAO,kBAAD,OACcM,EADd,cAEJK,EAAMO,UACNnB,GAEF,OAWPuB,EAMR,SAAC,GAMC,IALL5B,EAKI,EALJA,KACA6B,EAII,EAJJA,cACA1B,EAGI,EAHJA,cACAC,EAEI,EAFJA,gBACAC,EACI,EADJA,cACI,EACmBQ,YAAiC,qBAAjDiB,EADH,sBAGkCd,qBAHlC,mBAGGe,EAHH,KAGgBC,EAHhB,KAWJ,GANAb,qBAAU,WACJW,EAAaV,QACfY,EAAeF,EAAaT,MAAK,SAACY,GAAD,OAAQA,EAAGV,KAAOM,QAEpD,CAACA,EAAeC,IAEfC,EAAa,CACf,IAAIG,EAAU,GACd,OAAQH,EAAYI,sBAClB,IAAK,OACHD,EAAO,4BAAwBH,EAAYR,IAC3C,MACF,IAAK,aACHW,EAAO,0BACP7B,EAAgB+B,OAAOC,OAAO,GAAIhC,EAAe,CAC/CiC,MAAOP,EAAYQ,4BAErB,MACF,QACEL,EAAO,uBAAmBH,EAAYI,sBAG1C,OACE,kBAACpC,EAAD,CACEC,KAAMA,EACNC,WAAYiC,EACZhC,SAAU6B,EAAYS,SACtBrC,cAAeA,EACfC,gBAAiBA,EACjBC,cAAeA,IAInB,OAAO,gC,kCC3MX,8BA4BeoC,IAzBuC,SAAC,GAAmB,IAAjBC,EAAgB,EAAhBA,UACjDC,EACHC,aAAaC,QAAQ,iBACtB,OACIC,EAAiBC,YAAc,gCACrC,OACE,yBACEC,MAAO,CACLC,OAAQ,OACRC,MAAO,OACPC,OACE,cACiB,SAAhBR,EACGG,EACE,QACA,QACc,SAAhBH,EACA,QACA,SACNS,gBAAiBV,O,0NCFnBW,EAAWC,aAAW,SAACC,GAAD,MAAY,CACtCC,SAAU,CACRC,QAASF,EAAMG,QAAQ,KAAM,EAAG,EAAG,IAErCC,MAAO,CACLC,WAAY,MACZC,OAAQ,WAEVC,UAAW,CACTF,WAAY,MACZG,eAAgB,WAElBC,kBAAmB,CACjBJ,WAAY,MACZG,eAAgB,WAElB,WAAY,CACVN,QAASF,EAAMG,QAAQ,KAAM,MAE/B,gBAAiB,CACfO,SAAU,aAIRC,EAA0C,CAC9CC,YAAa,mBACbC,OAAQ,YA2PKC,UAxPkB,WAAO,IAC9BC,EAAWC,cAAXD,OACFE,EAAUnB,IACVoB,EAAgBC,cACdC,EAAMC,cAAND,EACAE,EAAkBtE,cAAlBsE,cACAC,EAAqBC,qBAAWC,KAAhCF,iBACFG,EAAeC,YAAaJ,GAPG,EASdjE,YAA4B,gBAA5CsE,EAT8B,sBAUhBtE,YAA0B,kBAAxCuE,EAV8B,sBAWpBvE,YAA0B,UAApCwE,EAX8B,sBAYjBxE,YAA6B,aAA1CyE,EAZ8B,sBAcbtE,qBAda,mBAc9BuE,EAd8B,KAcxBC,EAdwB,OAeDxE,mBAAuB,IAftB,mBAe9ByE,EAf8B,KAelBC,EAfkB,OAgBD1E,mBAAuB,IAhBtB,mBAgB9B2E,EAhB8B,KAgBlBC,EAhBkB,KA4CrC,OA1BAzE,qBAAU,WACR0E,SAASC,MAAQnB,EAAE,mBAAoB,CAAEoB,KAAI,OAAER,QAAF,IAAEA,OAAF,EAAEA,EAAMS,aACpD,CAACrB,EAAGY,IAEPpE,qBAAU,WACR,GACEgE,EAAa/D,QACbgE,EAAWhE,QACXiE,EAAOjE,QACPkE,EAAUlE,OACV,CACAoE,EAAQL,EAAa9D,MAAK,SAAC4E,GAAD,OAAQA,EAAGV,OAASjB,MAC9CoB,EAAcN,EAAWc,QAAO,SAACC,GAAD,OAAQA,EAAGZ,OAASjB,MACpD,IAAM8B,EAAed,EAClBY,QACC,SAACG,GAAD,OACEA,EAAGC,YACFlE,OAAOmE,UAAUC,eAAeC,KAAKvC,EAAcI,GAChDJ,EAAaI,GACbA,MAEPoC,KAAI,SAACL,GAAD,OAAQA,EAAGM,WAClBf,EAAcP,EAAOa,QAAO,SAACU,GAAD,OAAOR,EAAa1E,SAASkF,EAAErF,WAE5D,CAAC4D,EAAcb,EAAQc,EAAYC,EAAQC,IAEvCC,EACL,kBAAC,WAAD,KACE,kBAAC,IAAD,CAAYsB,QAAQ,KAAKC,UAAWrC,EAAcsC,QAC/ClC,EACCC,EADY,uBAEIS,EAAKA,KAFT,SAGZA,EAAKS,WAGT,kBAAC,IAAD,CAAWc,UAAWrC,EAAcuC,QAAS/C,SAAS,MACpD,yBAAKjB,MAAO,CAAEiE,UAAW,WACvB,yBACEC,IAAKC,IAAY5B,EAAKA,MACtB6B,IAAK7B,EAAKS,SACVhD,MAAO,CAAEiB,SAAU,WAGvB,kBAAC,IAAD,CAAM6C,UAAWtC,EAAQ,YAAahE,WAAS,EAACC,UAAU,UACxD,kBAAC,IAAD,CACED,WAAS,EACTC,UAAU,MACV4G,KAAK,SACLC,QAAQ,gBACRC,WAAW,UAEX,kBAAC,IAAD,CAAYV,QAAQ,YAAY7D,MAAO,CAAEwE,WAAY,MAClD7C,EAAE,cAEL,kBAAC,IAAD,KAAaY,EAAKkC,MAEpB,kBAAC,IAAD,CAASzE,MAAO,CAAE0E,OAAQ,UAC1B,kBAAC,IAAD,CACElH,WAAS,EACTC,UAAU,MACV4G,KAAK,SACLC,QAAQ,gBACRC,WAAW,UAEX,kBAAC,IAAD,CAAMI,MAAI,EAACC,GAAI,GACb,kBAAC,IAAD,CAAYf,QAAQ,YAAY7D,MAAO,CAAEwE,WAAY,MAClD7C,EAAE,uBAGP,kBAAC,IAAD,CAAMgD,MAAI,EAACC,GAAI,EAAGC,GAAI,GACpB,kBAAC,IAAD,CAAMrH,WAAS,EAAC8G,QAAQ,YACtB,kBAAC,IAAD,CACEtH,KAAM8E,EACN7E,WAAU,uBAAkBsF,EAAKA,KAAvB,oBACVrF,SAAUqF,EAAKuC,qBAKvB,kBAAC,IAAD,CAAS9E,MAAO,CAAE0E,OAAQ,UAC1B,kBAAC,IAAD,CACElH,WAAS,EACTC,UAAU,MACV4G,KAAK,SACLC,QAAQ,gBACRC,WAAW,UAEX,kBAAC,IAAD,CAAMI,MAAI,GACR,kBAAC,IAAD,CAAYd,QAAQ,YAAY7D,MAAO,CAAEwE,WAAY,MAClD7C,EAAE,oBAGP,kBAAC,IAAD,CAAMgD,MAAI,GACR,kBAAC,IAAD,CAAMnH,WAAS,EAACkD,QAAS,GACvB,kBAAC,IAAD,CAAMiE,MAAI,GACR,kBAAC,IAAD,KAAapC,EAAK7C,YAEpB,kBAAC,IAAD,CAAMiF,MAAI,GACR,kBAAC,IAAD,CAAcjF,UAAW6C,EAAK7C,gBAKtC,kBAAC,IAAD,CAASM,MAAO,CAAE0E,OAAQ,YAG9B,kBAAC,IAAD,CAAYb,QAAQ,KAAKC,UAAWrC,EAAcsC,QAC/CpC,EAAE,mBAAoB,CACrBoD,MAAOtC,EAAWrE,UAGtB,kBAAC,IAAD,CAAW0F,UAAWrC,EAAcuC,QAAS/C,SAAS,MACpD,kBAAC,IAAD,CACE6C,UAAWtC,EAAQ,YACnBhE,WAAS,EACTC,UAAU,MACViD,QAAS,EACT4D,QAAQ,UAEP7B,EAAWiB,KAAI,SAACsB,GAAD,OACd,kBAAC,WAAD,CAAUC,IAAG,gBAAWD,EAAGzG,KACzB,kBAAC,IAAD,CAAMoG,MAAI,EAACC,GAAI,EAAGC,GAAI,EAAGK,GAAI,GAC3B,kBAAC,IAAD,CAAMC,GAAI,UAAYH,EAAGzG,GAAIyB,MAAO,CAAEoF,eAAgB,SACpD,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAM5H,WAAS,EAACC,UAAU,SAAS8G,WAAW,UAC5C,kBAAC,IAAD,CAAMI,MAAI,GACR,kBAAC,IAAD,CACEnH,WAAS,EACT8G,QAAQ,WACRC,WAAW,cAEX,yBACEU,IAAKD,EAAGzG,GACR0B,OAAO,KACPiE,IAAKmB,IAAW,YAAD,OAAaL,EAAGzG,KAC/B6F,IAAKnC,EAAa+C,EAAGzG,QAI3B,kBAAC,IAAD,CAAMoG,MAAI,GACR,kBAAC,IAAD,CACE3H,KAAM8E,EACNlE,YAAaoH,EAAGzG,GAChBpB,cAAe,CACb0G,QAAS,YACT7D,MAAO,CAAEwE,WAAY,KACrBc,MAAO,UAETlI,gBAAiB,CACfyG,QAAS,YACTyB,MAAO,uBAY7B,kBAAC,IAAD,CAAYzB,QAAQ,KAAKC,UAAWrC,EAAcsC,QAC/CpC,EAAE,iBAEL,kBAAC,IAAD,CAAWmC,UAAWrC,EAAcuC,SAClC,kBAAC,IAAD,CACEF,UAAWtC,EAAQ,YACnBhE,WAAS,EACTC,UAAU,MACViD,QAAS,EACT4D,QAAQ,UAEP3B,EAAWe,KAAI,SAAC6B,GAAD,OACd,kBAAC,WAAD,CAAUN,IAAG,gBAAWM,EAAGhH,KACzB,kBAAC,IAAD,CAAMoG,MAAI,EAACC,GAAI,EAAGC,GAAI,EAAGK,GAAI,GAC3B,kBAAC,IAAD,CAAMC,GAAI,UAAYI,EAAGhH,GAAIyB,MAAO,CAAEoF,eAAgB,SACpD,kBAAC,IAAD,KACE,kBAAC,IAAD,CACE5H,WAAS,EACTC,UAAU,SACV8G,WAAW,SACX7D,QAAS,GAET,kBAAC,IAAD,CAAMiE,MAAI,GACR,kBAAC,IAAD,CACEnH,WAAS,EACT8G,QAAQ,WACRC,WAAW,cAEX,yBACEU,IAAKM,EAAGhH,GACR2F,IAAG,UAAKsB,+BAAL,2CAA0ED,EAAGE,gBAA7E,gBAAoGF,EAAGE,gBAAvG,SACHrB,IAAKmB,EAAGzC,MACR9C,MAAO,CAAEiB,SAAU,YAIzB,kBAAC,IAAD,CAAM0D,MAAI,GACR,kBAAC,IAAD,CACE3H,KAAM8E,EACN7E,WAAU,uBAAkBsI,EAAGhH,IAC/BrB,SAAUqI,EAAGzC,MACb3F,cAAe,CACb0G,QAAS,YACT7D,MAAO,CAAEwE,WAAY,KACrBc,MAAO,UAETlI,gBAAiB,CACfyG,QAAS,YACTyB,MAAO,wBAc/B,6EACgDhE,EADhD","file":"static/js/27.8b05fff3.chunk.js","sourcesContent":["import { Grid, Typography, TypographyProps } from \"@material-ui/core\";\nimport { StringMap, TOptions } from \"i18next\";\nimport React, { useEffect, useState } from \"react\";\nimport {\n  ContentTransModeType,\n  IGameChara,\n  IReleaseCondition,\n} from \"../../types\";\nimport { useCachedData } from \"../../utils\";\nimport { useAssetI18n } from \"../../utils/i18n\";\n\nexport const ContentTrans: React.FC<{\n  mode: ContentTransModeType;\n  contentKey: string;\n  original: string;\n  originalProps?: TypographyProps;\n  translatedProps?: TypographyProps;\n  assetTOptions?: string | TOptions<StringMap>;\n}> = ({\n  mode,\n  contentKey,\n  original,\n  originalProps,\n  translatedProps,\n  assetTOptions,\n}) => {\n  const { assetT } = useAssetI18n();\n  switch (mode) {\n    case \"original\":\n      return <Typography {...originalProps}>{original}</Typography>;\n    case \"translated\":\n      return (\n        <Typography {...translatedProps}>\n          {assetT(contentKey, original, assetTOptions)}\n        </Typography>\n      );\n    case \"both\":\n      return (\n        <Grid container direction=\"column\">\n          <Typography {...originalProps} color=\"textPrimary\">\n            {original}\n          </Typography>\n          <Typography {...translatedProps} color=\"textSecondary\">\n            {assetT(contentKey, original, assetTOptions)}\n          </Typography>\n        </Grid>\n      );\n  }\n};\n\nexport const CharaNameTrans: React.FC<{\n  mode: ContentTransModeType;\n  characterId: number;\n  originalProps?: TypographyProps;\n  translatedProps?: TypographyProps;\n  assetTOptions?: string | TOptions<StringMap>;\n}> = ({ mode, characterId, originalProps, translatedProps, assetTOptions }) => {\n  const [charas] = useCachedData<IGameChara>(\"gameCharacters\");\n  const { assetT, assetI18n } = useAssetI18n();\n\n  const [chara, setChara] = useState<IGameChara>();\n\n  useEffect(() => {\n    if (charas.length) {\n      setChara(charas.find((c) => c.id === characterId));\n    }\n  }, [charas, characterId]);\n\n  if (chara) {\n    switch (mode) {\n      case \"original\":\n        return (\n          <Typography {...originalProps}>\n            {chara.firstName} {chara.givenName}\n          </Typography>\n        );\n      case \"translated\":\n        return [\"zh-CN\", \"zh-TW\", \"ko\", \"ja\"].includes(assetI18n.language) ? (\n          <Typography {...translatedProps}>\n            {chara.firstName\n              ? assetT(\n                  `character_name:${characterId}.firstName`,\n                  chara.firstName,\n                  assetTOptions\n                )\n              : \"\"}{\" \"}\n            {assetT(\n              `character_name:${characterId}.givenName`,\n              chara.givenName,\n              assetTOptions\n            )}\n          </Typography>\n        ) : (\n          <Typography>\n            {assetT(\n              `character_name:${characterId}.givenName`,\n              chara.givenName,\n              assetTOptions\n            )}{\" \"}\n            {chara.firstName\n              ? assetT(\n                  `character_name:${characterId}.firstName`,\n                  chara.firstName,\n                  assetTOptions\n                )\n              : \"\"}\n          </Typography>\n        );\n      case \"both\":\n        return (\n          <Grid container direction=\"column\">\n            <Typography {...originalProps}>\n              {chara.firstName} {chara.givenName}\n            </Typography>\n            {[\"zh-CN\", \"zh-TW\", \"ko\", \"ja\"].includes(assetI18n.language) ? (\n              <Typography color=\"textSecondary\" {...translatedProps}>\n                {chara.firstName\n                  ? assetT(\n                      `character_name:${characterId}.firstName`,\n                      chara.firstName,\n                      assetTOptions\n                    )\n                  : \"\"}{\" \"}\n                {assetT(\n                  `character_name:${characterId}.givenName`,\n                  chara.givenName,\n                  assetTOptions\n                )}\n              </Typography>\n            ) : (\n              <Typography color=\"textSecondary\" {...translatedProps}>\n                {assetT(\n                  `character_name:${characterId}.givenName`,\n                  chara.givenName,\n                  assetTOptions\n                )}{\" \"}\n                {chara.firstName\n                  ? assetT(\n                      `character_name:${characterId}.firstName`,\n                      chara.firstName,\n                      assetTOptions\n                    )\n                  : \"\"}\n              </Typography>\n            )}\n          </Grid>\n        );\n    }\n  } else {\n    return <Typography></Typography>;\n  }\n};\n\nexport const ReleaseCondTrans: React.FC<{\n  mode: ContentTransModeType;\n  releaseCondId: number;\n  originalProps?: TypographyProps;\n  translatedProps?: TypographyProps;\n  assetTOptions?: string | TOptions<StringMap>;\n}> = ({\n  mode,\n  releaseCondId,\n  originalProps,\n  translatedProps,\n  assetTOptions,\n}) => {\n  const [releaseConds] = useCachedData<IReleaseCondition>(\"releaseConditions\");\n\n  const [releaseCond, setReleaseCond] = useState<IReleaseCondition>();\n\n  useEffect(() => {\n    if (releaseConds.length) {\n      setReleaseCond(releaseConds.find((rc) => rc.id === releaseCondId));\n    }\n  }, [releaseCondId, releaseConds]);\n\n  if (releaseCond) {\n    let i18nKey = \"\";\n    switch (releaseCond.releaseConditionType) {\n      case \"none\":\n        i18nKey = `release_cond:none_${releaseCond.id}`;\n        break;\n      case \"card_level\":\n        i18nKey = `release_cond:card_level`;\n        assetTOptions = Object.assign({}, assetTOptions, {\n          level: releaseCond.releaseConditionTypeLevel,\n        });\n        break;\n      default:\n        i18nKey = `release_cond:${releaseCond.releaseConditionType}`;\n        break;\n    }\n    return (\n      <ContentTrans\n        mode={mode}\n        contentKey={i18nKey}\n        original={releaseCond.sentence}\n        originalProps={originalProps}\n        translatedProps={translatedProps}\n        assetTOptions={assetTOptions}\n      />\n    );\n  } else {\n    return <div></div>;\n  }\n};\n","import { useMediaQuery } from \"@material-ui/core\";\nimport React from \"react\";\n\nconst ColorPreview: React.FC<{ colorCode: string }> = ({ colorCode }) => {\n  const displayMode =\n    (localStorage.getItem(\"display-mode\") as \"dark\" | \"light\" | \"auto\") ||\n    \"auto\";\n  const preferDarkMode = useMediaQuery(\"(prefers-color-scheme: dark)\");\n  return (\n    <div\n      style={{\n        height: \"26px\",\n        width: \"26px\",\n        border:\n          \"solid 2px \" +\n          (displayMode === \"auto\"\n            ? preferDarkMode\n              ? \"white\"\n              : \"black\"\n            : displayMode === \"dark\"\n            ? \"white\"\n            : \"black\"),\n        backgroundColor: colorCode,\n      }}\n    ></div>\n  );\n};\n\nexport default ColorPreview;\n","import {\n  Container,\n  Divider,\n  Grid,\n  makeStyles,\n  Paper,\n  Typography,\n} from \"@material-ui/core\";\nimport React, { Fragment, useContext, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { SettingContext } from \"../context\";\nimport { useLayoutStyles } from \"../styles/layout\";\nimport { IGameChara, IMusicInfo, IMusicTagInfo, IUnitProfile } from \"../types\";\nimport { useCachedData, useCharaName } from \"../utils\";\nimport { useAssetI18n } from \"../utils/i18n\";\nimport { charaIcons, UnitLogoMap } from \"../utils/resources\";\nimport ColorPreview from \"./subs/ColorPreview\";\nimport { CharaNameTrans, ContentTrans } from \"./subs/ContentTrans\";\n\nconst useStyle = makeStyles((theme) => ({\n  tabpanel: {\n    padding: theme.spacing(\"1%\", 0, 0, 0),\n  },\n  media: {\n    paddingTop: \"70%\",\n    cursor: \"pointer\",\n  },\n  nameLabel: {\n    paddingTop: \"30%\",\n    backgroundSize: \"contain\",\n  },\n  nameVerticalLabel: {\n    paddingTop: \"45%\",\n    backgroundSize: \"contain\",\n  },\n  \"grid-out\": {\n    padding: theme.spacing(\"1%\", \"0\"),\n  },\n  \"unit-logo-img\": {\n    maxWidth: \"128px\",\n  },\n}));\n\nconst unitIdTagMap: { [key: string]: string } = {\n  light_sound: \"light_music_club\",\n  piapro: \"vocaloid\",\n};\n\nconst UnitDetail: React.FC<{}> = () => {\n  const { unitId } = useParams<{ unitId: string }>();\n  const classes = useStyle();\n  const layoutClasses = useLayoutStyles();\n  const { t } = useTranslation();\n  const { getTranslated } = useAssetI18n();\n  const { contentTransMode } = useContext(SettingContext)!;\n  const getCharaName = useCharaName(contentTransMode);\n\n  const [unitProfiles] = useCachedData<IUnitProfile>(\"unitProfiles\");\n  const [gameCharas] = useCachedData<IGameChara>(\"gameCharacters\");\n  const [musics] = useCachedData<IMusicInfo>(\"musics\");\n  const [musicTags] = useCachedData<IMusicTagInfo>(\"musicTags\");\n\n  const [unit, setUnit] = useState<IUnitProfile>();\n  const [unitCharas, setUnitCharas] = useState<IGameChara[]>([]);\n  const [unitMusics, setUnitMusics] = useState<IMusicInfo[]>([]);\n\n  useEffect(() => {\n    document.title = t(\"title:unitDetail\", { name: unit?.unitName });\n  }, [t, unit]);\n\n  useEffect(() => {\n    if (\n      unitProfiles.length &&\n      gameCharas.length &&\n      musics.length &&\n      musicTags.length\n    ) {\n      setUnit(unitProfiles.find((up) => up.unit === unitId));\n      setUnitCharas(gameCharas.filter((gc) => gc.unit === unitId));\n      const unitMusicIds = musicTags\n        .filter(\n          (mt) =>\n            mt.musicTag ===\n            (Object.prototype.hasOwnProperty.call(unitIdTagMap, unitId)\n              ? unitIdTagMap[unitId]\n              : unitId)\n        )\n        .map((mt) => mt.musicId);\n      setUnitMusics(musics.filter((m) => unitMusicIds.includes(m.id)));\n    }\n  }, [unitProfiles, unitId, gameCharas, musics, musicTags]);\n\n  return unit ? (\n    <Fragment>\n      <Typography variant=\"h6\" className={layoutClasses.header}>\n        {getTranslated(\n          contentTransMode,\n          `unit_profile:${unit.unit}.name`,\n          unit.unitName\n        )}\n      </Typography>\n      <Container className={layoutClasses.content} maxWidth=\"sm\">\n        <div style={{ textAlign: \"center\" }}>\n          <img\n            src={UnitLogoMap[unit.unit]}\n            alt={unit.unitName}\n            style={{ maxWidth: \"100%\" }}\n          ></img>\n        </div>\n        <Grid className={classes[\"grid-out\"]} container direction=\"column\">\n          <Grid\n            container\n            direction=\"row\"\n            wrap=\"nowrap\"\n            justify=\"space-between\"\n            alignItems=\"center\"\n          >\n            <Typography variant=\"subtitle1\" style={{ fontWeight: 600 }}>\n              {t(\"common:id\")}\n            </Typography>\n            <Typography>{unit.seq}</Typography>\n          </Grid>\n          <Divider style={{ margin: \"1% 0\" }} />\n          <Grid\n            container\n            direction=\"row\"\n            wrap=\"nowrap\"\n            justify=\"space-between\"\n            alignItems=\"center\"\n          >\n            <Grid item xs={2}>\n              <Typography variant=\"subtitle1\" style={{ fontWeight: 600 }}>\n                {t(\"unit:introduction\")}\n              </Typography>\n            </Grid>\n            <Grid item xs={6} md={8}>\n              <Grid container justify=\"flex-end\">\n                <ContentTrans\n                  mode={contentTransMode}\n                  contentKey={`unit_profile:${unit.unit}.profileSentence`}\n                  original={unit.profileSentence}\n                />\n              </Grid>\n            </Grid>\n          </Grid>\n          <Divider style={{ margin: \"1% 0\" }} />\n          <Grid\n            container\n            direction=\"row\"\n            wrap=\"nowrap\"\n            justify=\"space-between\"\n            alignItems=\"center\"\n          >\n            <Grid item>\n              <Typography variant=\"subtitle1\" style={{ fontWeight: 600 }}>\n                {t(\"unit:colorCode\")}\n              </Typography>\n            </Grid>\n            <Grid item>\n              <Grid container spacing={1}>\n                <Grid item>\n                  <Typography>{unit.colorCode}</Typography>\n                </Grid>\n                <Grid item>\n                  <ColorPreview colorCode={unit.colorCode} />\n                </Grid>\n              </Grid>\n            </Grid>\n          </Grid>\n          <Divider style={{ margin: \"1% 0\" }} />\n        </Grid>\n      </Container>\n      <Typography variant=\"h6\" className={layoutClasses.header}>\n        {t(\"common:character\", {\n          count: unitCharas.length,\n        })}\n      </Typography>\n      <Container className={layoutClasses.content} maxWidth=\"md\">\n        <Grid\n          className={classes[\"grid-out\"]}\n          container\n          direction=\"row\"\n          spacing={2}\n          justify=\"center\"\n        >\n          {unitCharas.map((uc) => (\n            <Fragment key={`chara-${uc.id}`}>\n              <Grid item xs={6} md={4} lg={3}>\n                <Link to={\"/chara/\" + uc.id} style={{ textDecoration: \"none\" }}>\n                  <Paper>\n                    <Grid container direction=\"column\" alignItems=\"center\">\n                      <Grid item>\n                        <Grid\n                          container\n                          justify=\"flex-end\"\n                          alignItems=\"flex-start\"\n                        >\n                          <img\n                            key={uc.id}\n                            height=\"84\"\n                            src={charaIcons[`CharaIcon${uc.id}`]}\n                            alt={getCharaName(uc.id)}\n                          ></img>\n                        </Grid>\n                      </Grid>\n                      <Grid item>\n                        <CharaNameTrans\n                          mode={contentTransMode}\n                          characterId={uc.id}\n                          originalProps={{\n                            variant: \"subtitle1\",\n                            style: { fontWeight: 600 },\n                            align: \"center\",\n                          }}\n                          translatedProps={{\n                            variant: \"subtitle2\",\n                            align: \"center\",\n                          }}\n                        />\n                      </Grid>\n                    </Grid>\n                  </Paper>\n                </Link>\n              </Grid>\n            </Fragment>\n          ))}\n        </Grid>\n      </Container>\n      <Typography variant=\"h6\" className={layoutClasses.header}>\n        {t(\"common:music\")}\n      </Typography>\n      <Container className={layoutClasses.content}>\n        <Grid\n          className={classes[\"grid-out\"]}\n          container\n          direction=\"row\"\n          spacing={2}\n          justify=\"center\"\n        >\n          {unitMusics.map((um) => (\n            <Fragment key={`music-${um.id}`}>\n              <Grid item xs={6} md={3} lg={2}>\n                <Link to={\"/music/\" + um.id} style={{ textDecoration: \"none\" }}>\n                  <Paper>\n                    <Grid\n                      container\n                      direction=\"column\"\n                      alignItems=\"center\"\n                      spacing={1}\n                    >\n                      <Grid item>\n                        <Grid\n                          container\n                          justify=\"flex-end\"\n                          alignItems=\"flex-start\"\n                        >\n                          <img\n                            key={um.id}\n                            src={`${process.env.REACT_APP_ASSET_DOMAIN}/file/sekai-assets/music/jacket/${um.assetbundleName}_rip/${um.assetbundleName}.webp`}\n                            alt={um.title}\n                            style={{ maxWidth: \"100%\" }}\n                          ></img>\n                        </Grid>\n                      </Grid>\n                      <Grid item>\n                        <ContentTrans\n                          mode={contentTransMode}\n                          contentKey={`music_titles:${um.id}`}\n                          original={um.title}\n                          originalProps={{\n                            variant: \"subtitle1\",\n                            style: { fontWeight: 600 },\n                            align: \"center\",\n                          }}\n                          translatedProps={{\n                            variant: \"subtitle2\",\n                            align: \"center\",\n                          }}\n                        />\n                      </Grid>\n                    </Grid>\n                  </Paper>\n                </Link>\n              </Grid>\n            </Fragment>\n          ))}\n        </Grid>\n      </Container>\n    </Fragment>\n  ) : (\n    <div>\n      Loading... If you saw this for a while, unit {unitId} does not exist.\n    </div>\n  );\n};\n\nexport default UnitDetail;\n"],"sourceRoot":""}
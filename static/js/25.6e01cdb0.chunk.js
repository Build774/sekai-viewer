(this["webpackJsonpsekai-viewer"]=this["webpackJsonpsekai-viewer"]||[]).push([[25],{5955:function(e,t,a){"use strict";a.d(t,"e",(function(){return m})),a.d(t,"b",(function(){return d})),a.d(t,"d",(function(){return b})),a.d(t,"a",(function(){return g})),a.d(t,"c",(function(){return j}));var n=a(5966),r=a.n(n),c=a(5967),i=a(32),o=a(5964),s=a.n(o),u=a(0),l=a(50);function m(e){var t=Object(u.useState)(e),a=Object(i.a)(t,2),n=a[0],r=a[1],c=Object(u.useRef)(n);return Object(u.useEffect)((function(){c.current=n}),[n]),[n,c,r]}var f={};function d(e){var t=m([]),a=Object(i.a)(t,3),n=a[0],o=a[1],l=a[2],d=Object(u.useCallback)(Object(c.a)(r.a.mark((function t(){var a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.get("https://raw.githubusercontent.com/Sekai-World/sekai-master-db-diff/master/".concat(e,".json"));case 2:return a=t.sent,n=a.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)}))),[e]);return Object(u.useEffect)((function(){f[e]&&f[e].length?l(f[e]):d().then((function(t){l(t),f[e]=t}))}),[d,e,l]),[n,o]}function b(e){var t=m({time:0,first10:[],rank20:[],rank30:[],rank40:[],rank50:[],rank100:[],rank200:[],rank300:[],rank400:[],rank500:[],rank1000:[],rank2000:[],rank3000:[],rank4000:[],rank5000:[],rank10000:[],rank20000:[],rank30000:[],rank40000:[],rank50000:[],rank100000:[]}),a=Object(i.a)(t,3),n=a[0],o=a[1],l=a[2];return[Object(u.useCallback)(Object(c.a)(r.a.mark((function t(){var a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.get("https://bitbucket.org/sekai-world/sekai-event-track/raw/main/event".concat(e,".json?t=").concat(Date.now()));case 2:return a=t.sent,n=a.data,l(n),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)}))),[e,l]),n,o]}var g={all:"All",vocaloid:"Vocaloid",light_music_club:"Light Music Club",idol:"Idol",school_refusal:"School Refusal",theme_park:"Theme Park",street:"Street"};function j(e){var t=d("gameCharacters"),a=Object(i.a)(t,1)[0],n=Object(l.b)(),r=n.assetT,c=n.assetI18n;return Object(u.useCallback)((function(t){var n=a.find((function(e){return e.id===t}));if(null===n||void 0===n?void 0:n.firstName)switch(e){case"original":return"".concat(n.firstName," ").concat(n.givenName);case"translated":return["zh-CN","zh-TW","ko","ja"].includes(c.language)?"".concat(r("character_name:".concat(t,".firstName"),n.firstName)," ").concat(r("character_name:".concat(t,".givenName"),n.givenName)):"".concat(r("character_name:".concat(t,".givenName"),n.givenName)," ").concat(r("character_name:".concat(t,".firstName"),n.firstName));case"both":return"".concat(n.firstName," ").concat(n.givenName," | ")+(["zh-CN","zh-TW","ko","ja"].includes(c.language)?"".concat(r("character_name:".concat(t,".firstName"),n.firstName)," ").concat(r("character_name:".concat(t,".givenName"),n.givenName)):"".concat(r("character_name:".concat(t,".givenName"),n.givenName)," ").concat(r("character_name:".concat(t,".firstName"),n.firstName)))}return null===n||void 0===n?void 0:n.givenName}),[c.language,r,a,e])}},5956:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(5910),r=Object(n.a)((function(e){return{header:{fontWeight:"bold"},content:{marginTop:e.spacing(3),marginBottom:e.spacing(3),marginLeft:"auto",marginRight:"auto"}}}))},5957:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return m})),a.d(t,"c",(function(){return f}));var n=a(32),r=a(42),c=a(6092),i=a(0),o=a.n(i),s=a(5955),u=a(50),l=function(e){var t=e.mode,a=e.contentKey,n=e.original,i=e.originalProps,s=e.translatedProps,l=e.assetTOptions,m=Object(u.b)().assetT;switch(t){case"original":return o.a.createElement(r.a,i,n);case"translated":return o.a.createElement(r.a,s,m(a,n,l));case"both":return o.a.createElement(c.a,{container:!0,direction:"column"},o.a.createElement(r.a,Object.assign({},i,{color:"textPrimary"}),n),o.a.createElement(r.a,Object.assign({},s,{color:"textSecondary"}),m(a,n,l)))}},m=function(e){var t=e.mode,a=e.characterId,l=e.originalProps,m=e.translatedProps,f=e.assetTOptions,d=Object(s.b)("gameCharacters"),b=Object(n.a)(d,1)[0],g=Object(u.b)(),j=g.assetT,h=g.assetI18n,O=Object(i.useState)(),v=Object(n.a)(O,2),p=v[0],k=v[1];if(Object(i.useEffect)((function(){b.length&&k(b.find((function(e){return e.id===a})))}),[b,a]),!p)return o.a.createElement(r.a,null);switch(t){case"original":return o.a.createElement(r.a,l,p.firstName," ",p.givenName);case"translated":return["zh-CN","zh-TW","ko","ja"].includes(h.language)?o.a.createElement(r.a,m,p.firstName?j("character_name:".concat(a,".firstName"),p.firstName,f):""," ",j("character_name:".concat(a,".givenName"),p.givenName,f)):o.a.createElement(r.a,null,j("character_name:".concat(a,".givenName"),p.givenName,f)," ",p.firstName?j("character_name:".concat(a,".firstName"),p.firstName,f):"");case"both":return o.a.createElement(c.a,{container:!0,direction:"column"},o.a.createElement(r.a,l,p.firstName," ",p.givenName),["zh-CN","zh-TW","ko","ja"].includes(h.language)?o.a.createElement(r.a,Object.assign({color:"textSecondary"},m),p.firstName?j("character_name:".concat(a,".firstName"),p.firstName,f):""," ",j("character_name:".concat(a,".givenName"),p.givenName,f)):o.a.createElement(r.a,Object.assign({color:"textSecondary"},m),j("character_name:".concat(a,".givenName"),p.givenName,f)," ",p.firstName?j("character_name:".concat(a,".firstName"),p.firstName,f):""))}},f=function(e){var t=e.mode,a=e.releaseCondId,r=e.originalProps,c=e.translatedProps,u=e.assetTOptions,m=Object(s.b)("releaseConditions"),f=Object(n.a)(m,1)[0],d=Object(i.useState)(),b=Object(n.a)(d,2),g=b[0],j=b[1];if(Object(i.useEffect)((function(){f.length&&j(f.find((function(e){return e.id===a})))}),[a,f]),g){var h="";switch(g.releaseConditionType){case"none":h="release_cond:none_".concat(g.id);break;case"card_level":h="release_cond:card_level",u=Object.assign({},u,{level:g.releaseConditionTypeLevel});break;default:h="release_cond:".concat(g.releaseConditionType)}return o.a.createElement(l,{mode:t,contentKey:h,original:g.sentence,originalProps:r,translatedProps:c,assetTOptions:u})}return o.a.createElement("div",null)}},5962:function(e,t,a){"use strict";var n=a(32),r=a(65),c=a(18),i=a(5924),o=a(6092),s=a(0),u=a.n(s),l=["xs","sm","md","lg","xl"],m={xs:12,md:4};t.a=function(e){var t=e.viewComponent,a=e.callback,f=e.data,d=function(e){var t=Object(r.a)({},e||m);return l.forEach((function(e,a,n){t[e]||(t[e]=a>0?t[n[a-1]]:12)})),t}(e.gridSize),b=function(){var e=Object(c.a)();return l.map((function(t){return Object(i.a)(e.breakpoints.down(t))&&t})).find(Boolean)||l[l.length-1]}(),g=Object(s.useState)(!0),j=Object(n.a)(g,2),h=j[0],O=j[1],v=Object(s.useRef)(new IntersectionObserver((function(e){return a(e,O)}),{threshold:.5})),p=Object(s.useRef)(null);Object(s.useEffect)((function(){O(!0)}),[f]),Object(s.useEffect)((function(){var e=v.current,t=p.current;return t&&e.observe(t),function(){t&&e.unobserve(t)}}));var k=12/d[b],N=f.length?k:2*k;return u.a.createElement(s.Fragment,null,u.a.createElement(o.a,{container:!0,direction:"row",spacing:1},f.length?f.map((function(e,a){return u.a.createElement(o.a,{key:a,item:!0,xs:d.xs,sm:d.sm,md:d.md,lg:d.lg,xl:d.xl},t({data:e,index:a}))})):null),u.a.createElement(o.a,{container:!0,direction:"row",ref:p,style:{display:h?"flex":"none",paddingTop:"4px"},spacing:1},Array.from({length:N}).map((function(e,a){return u.a.createElement(o.a,{key:"empty-".concat(a),item:!0,xs:d.xs,sm:d.sm,md:d.md,lg:d.lg,xl:d.xl},t({}))}))))}},6197:function(e,t,a){"use strict";a.r(t);var n=a(54),r=a(32),c=a(5910),i=a(6033),o=a(6043),s=a(42),u=a(6031),l=a(5938),m=a(6092),f=a(6093),d=a(5949),b=a(6044),g=a(6104),j=a(6032),h=a(6053),O=a(0),v=a.n(O),p=a(5883),k=a(6034),N=a.n(k),E=a(51),w=a(5956),_=a(5955),x=a(50),y=a(5957),C=a(5962),S=Object(c.a)((function(e){return{media:{paddingTop:"75%",backgroundSize:"contain"},card:{cursor:"pointer"},subheader:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center"}}}));t.default=function(){var e=S(),t=Object(w.a)(),a=Object(p.a)().t,c=Object(O.useContext)(E.a).contentTransMode,k=Object(x.b)().getTranslated,T=Object(_.b)("tips"),z=Object(r.a)(T,1)[0],P=Object(O.useState)([]),I=Object(r.a)(P,2),W=I[0],R=I[1],B=Object(_.e)([]),L=Object(r.a)(B,3),A=L[0],M=L[1],F=L[2],J=Object(_.e)(0),K=Object(r.a)(J,3),D=K[0],U=K[1],V=K[2],Y=Object(_.e)(12),q=Object(r.a)(Y,2),G=q[0],H=q[1],Q=Object(_.e)(!0),X=Object(r.a)(Q,3),Z=X[1],$=X[2],ee=Object(_.e)(!1),te=Object(r.a)(ee,3),ae=te[1],ne=te[2],re=Object(O.useState)(!1),ce=Object(r.a)(re,2),ie=ce[0],oe=ce[1],se=Object(O.useState)(0),ue=Object(r.a)(se,2),le=ue[0],me=ue[1],fe=Object(O.useState)("ja"),de=Object(r.a)(fe,2),be=de[0],ge=de[1],je=Object(O.useCallback)((function(e,t){return A.slice(t*(e-1),t*e)}),[A]),he=Object(O.useMemo)((function(){return A.map((function(e){var t;switch(be){case"ja":t="".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/comic/one_frame_rip/").concat(e.assetbundleName,".webp");break;case"fr":t="".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/comic_fr/").concat(e.assetbundleName,".png")}return{src:t,alt:k(c,"comic_title:".concat(e.id),e.title),downloadUrl:t}}))}),[A,c,k,be]);Object(O.useEffect)((function(){document.title=a("title:comicList")}),[a]),Object(O.useEffect)((function(){if(z.length){var e=z.filter((function(e){return"assetbundleName"in e}));F(e),R([]),V(0)}}),[z,R,V,F]),Object(O.useEffect)((function(){R((function(e){return[].concat(Object(n.a)(e),Object(n.a)(je(D,G)))})),$(!0)}),[D,G,z,$,je]),Object(O.useEffect)((function(){ne(Boolean(z.length))}),[ne,z]);return v.a.createElement(O.Fragment,null,v.a.createElement(s.a,{variant:"h6",className:t.header},a("common:comic")),v.a.createElement(l.a,{className:t.content},v.a.createElement(m.a,{container:!0,justify:"space-between"},v.a.createElement(f.a,{style:{marginBottom:"1%"}},v.a.createElement(d.a,{size:"medium",color:"ja"===be?"secondary":"primary",onClick:function(){return ge("ja")}},v.a.createElement(s.a,null,"JA")),v.a.createElement(d.a,{size:"medium",color:"fr"===be?"secondary":"primary",onClick:function(){return ge("fr")}},v.a.createElement(s.a,null,"FR")))),"fr"===be?v.a.createElement(h.a,{severity:"info"},v.a.createElement(s.a,null,"Credit: Yasito (",v.a.createElement(b.a,{href:"https://twitter.com/pjsekai_fra",style:{textDecorationLine:"none"}},v.a.createElement(g.a,{fontSize:"inherit"})," @pjsekai_fra"),")")):null,Object(C.a)({viewComponent:function(t){var a,n=t.data,r=t.index;if(!n)return v.a.createElement(i.a,{className:e.card},v.a.createElement(j.a,{variant:"rect",className:e.media}),v.a.createElement(o.a,null,v.a.createElement(s.a,{variant:"subtitle1",className:e.subheader},v.a.createElement(j.a,{variant:"text",width:"90%",style:{margin:"auto"}}))));switch(be){case"ja":a="".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/comic/one_frame_rip/").concat(n.assetbundleName,".webp");break;case"fr":a="".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/comic_fr/").concat(n.assetbundleName,".png")}return v.a.createElement(i.a,{className:e.card,onClick:function(){me(r),oe(!0)}},v.a.createElement(u.a,{className:e.media,image:a,title:n.title}),v.a.createElement(o.a,{style:{paddingBottom:"16px"}},v.a.createElement(y.b,{mode:c,contentKey:"comic_title:".concat(n.id),original:n.title,originalProps:{variant:"subtitle1"},translatedProps:{variant:"subtitle1"}})))},callback:function(e,t){ae.current&&(e[0].isIntersecting&&Z.current&&(!M.current.length||M.current.length>U.current*H.current)?(V((function(e){return e+1})),$(!1)):M.current.length&&M.current.length<=U.current*H.current&&t(!1))},data:W,gridSize:{xs:12,md:4,lg:3}})),v.a.createElement(N.a,{visible:ie,onClose:function(){return oe(!1)},images:he,zIndex:2e3,activeIndex:le,downloadable:!0,downloadInNewWindow:!0,onMaskClick:function(){return oe(!1)},onChange:function(e,t){return me(t)},zoomSpeed:.25}))}}}]);
//# sourceMappingURL=25.6e01cdb0.chunk.js.map